<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© - Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±</title>
    <link rel="icon" href="Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±.webp" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #16a085;
            --light: #ecf0f1;
            --dark: #34495e;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --gradient-5: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(240, 147, 251, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            position: relative;
            z-index: 1;
        }

        /* ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        .login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.98);
            padding: 50px 40px;
            border-radius: 25px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.3),
                0 0 100px rgba(102, 126, 234, 0.2);
            width: 100%;
            max-width: 480px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-header {
            text-align: center;
            margin-bottom: 35px;
        }

        .login-header .icon-wrapper {
            width: 90px;
            height: 90px;
            margin: 0 auto 20px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
            }
        }

        .login-header i {
            font-size: 45px;
            color: white;
        }

        .login-header h1 {
            color: var(--primary);
            font-size: 30px;
            margin-bottom: 10px;
            font-weight: 800;
        }

        .login-header p {
            color: #7f8c8d;
            font-size: 15px;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 15px;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper input {
            width: 100%;
            padding: 16px 50px 16px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .input-wrapper input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
            background: white;
        }

        .input-wrapper i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #95a5a6;
            font-size: 18px;
        }

        .toggle-password {
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .toggle-password:hover {
            color: var(--secondary);
        }

        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .login-btn:active {
            transform: translateY(-1px);
        }

        .login-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .error-message {
            background: #ffe6e6;
            color: var(--danger);
            padding: 14px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            text-align: center;
            border: 1px solid #ffcccc;
            font-weight: 600;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-container {
            display: none;
            max-width: 1600px;
            margin: 0 auto;
        }

        .stats-header {
            background: rgba(255, 255, 255, 0.98);
            padding: 30px 35px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 25px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stats-title {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .stats-title .icon-circle {
            width: 70px;
            height: 70px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .stats-title i {
            font-size: 35px;
            color: white;
        }

        .stats-title h1 {
            color: var(--primary);
            font-size: 32px;
            font-weight: 800;
        }

        .stats-title .update-time {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .live-indicator {
            width: 10px;
            height: 10px;
            background: #27ae60;
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .stats-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 26px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: var(--gradient-3);
            color: white;
        }

        .btn-success {
            background: var(--gradient-4);
            color: white;
        }

        .btn-danger {
            background: var(--gradient-2);
            color: white;
        }

        .btn-warning {
            background: var(--gradient-5);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
        }

        .stat-card.purple::before { background: var(--gradient-1); }
        .stat-card.pink::before { background: var(--gradient-2); }
        .stat-card.blue::before { background: var(--gradient-3); }
        .stat-card.green::before { background: var(--gradient-4); }
        .stat-card.orange::before { background: var(--gradient-5); }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stat-title {
            color: #7f8c8d;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .stat-card.purple .stat-icon { background: var(--gradient-1); }
        .stat-card.pink .stat-icon { background: var(--gradient-2); }
        .stat-card.blue .stat-icon { background: var(--gradient-3); }
        .stat-card.green .stat-icon { background: var(--gradient-4); }
        .stat-card.orange .stat-icon { background: var(--gradient-5); }

        .stat-value {
            font-size: 42px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 8px;
            line-height: 1;
        }

        .stat-label {
            color: #95a5a6;
            font-size: 14px;
            font-weight: 600;
        }

        .stat-change {
            margin-top: 12px;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
        .table-container {
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .table-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .table-title i {
            font-size: 26px;
            color: var(--secondary);
        }

        .search-box {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            width: 320px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
            background: white;
        }

        .table-wrapper {
            overflow-x: auto;
            border-radius: 12px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        th {
            padding: 18px 20px;
            text-align: right;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        td {
            padding: 18px 20px;
            border-bottom: 1px solid #f0f0f0;
            color: #2c3e50;
            font-size: 15px;
        }

        tbody tr {
            transition: all 0.3s ease;
            background: white;
        }

        tbody tr:hover {
            background: #f8f9fa;
            transform: scale(1.01);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .badge-success {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .badge-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .badge-warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        .badge-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        /* Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© */
        .chart-container {
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .chart-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chart-title i {
            font-size: 26px;
            color: var(--secondary);
        }

        .progress-bar {
            background: #f0f0f0;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 18px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            display: flex;
            align-items: center;
            padding: 0 20px;
            color: white;
            font-weight: 700;
            font-size: 13px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .alert {
            padding: 18px 22px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .alert-info {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .alert i {
            font-size: 24px;
        }

        /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading {
            display: inline-block;
            width: 22px;
            height: 22px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆÙ‚Øª */
        .time-distribution {
            margin-top: 20px;
        }

        .time-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 2px solid #f0f0f0;
        }

        .time-item:last-child {
            border-bottom: none;
        }

        .time-label {
            font-weight: 700;
            color: var(--primary);
            font-size: 15px;
        }

        .time-value {
            color: var(--secondary);
            font-weight: 800;
            font-size: 16px;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ */
        .success-toast {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 18px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(67, 233, 123, 0.4);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .login-card {
                padding: 35px 25px;
            }

            .stats-header {
                padding: 20px;
                flex-direction: column;
                align-items: flex-start;
            }

            .stats-title h1 {
                font-size: 24px;
            }

            .stats-actions {
                width: 100%;
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .search-box {
                width: 100%;
            }

            .table-wrapper {
                font-size: 13px;
            }

            th, td {
                padding: 12px 10px;
            }

            .stat-value {
                font-size: 36px;
            }
        }

        .no-data {
            text-align: center;
            padding: 60px 20px;
            color: #95a5a6;
        }

        .no-data i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .no-data p {
            font-size: 18px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div id="loginContainer" class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="icon-wrapper">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h1>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ù…ÙŠØ©</h1>
                    <p>Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©<br>ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</p>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="adminPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</label>
                        <div class="input-wrapper">
                            <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                            <i class="fas fa-eye toggle-password" onclick="togglePassword()"></i>
                        </div>
                    </div>
                    <button type="submit" class="login-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
                    </button>
                    <div id="loginError" class="error-message"></div>
                </form>
                <div class="alert alert-info" style="margin-top: 25px;">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> admin@abrar2025
                    </div>
                </div>
            </div>
        </div>

        <!-- ØµÙØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
        <div id="statsContainer" class="stats-container">
            <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
            <div class="stats-header">
                <div class="stats-title">
                    <div class="icon-circle">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div>
                        <h1>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h1>
                        <div class="update-time">
                            <div class="live-indicator"></div>
                            <span>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="lastUpdate"></span></span>
                        </div>
                    </div>
                </div>
                <div class="stats-actions">
                    <button class="btn btn-primary" onclick="refreshStats()">
                        <i class="fas fa-sync-alt"></i>
                        <span>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
                    </button>
                    <button class="btn btn-success" onclick="exportToExcel()">
                        <i class="fas fa-file-excel"></i>
                        <span>ØªØµØ¯ÙŠØ± Excel</span>
                    </button>
                    <button class="btn btn-warning" onclick="clearAllData()">
                        <i class="fas fa-trash-alt"></i>
                        <span>Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
                    </button>
                    <button class="btn btn-danger" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Ø®Ø±ÙˆØ¬</span>
                    </button>
                </div>
            </div>

            <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div class="stats-grid">
                <div class="stat-card purple">
                    <div class="stat-header">
                        <span class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø²ÙˆØ§Ø±</span>
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalUsers">0</div>
                    <div class="stat-label">Ù…Ø³ØªØ®Ø¯Ù… ÙØ±ÙŠØ¯</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        <span id="userChange">+0%</span> Ù…Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ
                    </div>
                </div>

                <div class="stat-card pink">
                    <div class="stat-header">
                        <span class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª</span>
                        <div class="stat-icon">
                            <i class="fas fa-download"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalDownloads">0</div>
                    <div class="stat-label">Ù…Ù„Ù ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        <span id="downloadChange">+0%</span> Ù…Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ
                    </div>
                </div>

                <div class="stat-card blue">
                    <div class="stat-header">
                        <span class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª</span>
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalTime">0</div>
                    <div class="stat-label">Ø³Ø§Ø¹Ø© Ù…Ù† Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø´Ø·</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        <span id="timeChange">+0%</span> Ù…Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ
                    </div>
                </div>

                <div class="stat-card green">
                    <div class="stat-header">
                        <span class="stat-title">Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„ÙŠÙˆÙ…</span>
                        <div class="stat-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="todayVisitors">0</div>
                    <div class="stat-label">Ø²Ø§Ø¦Ø± Ù†Ø´Ø· Ø§Ù„ÙŠÙˆÙ…</div>
                    <div class="stat-change positive">
                        <i class="fas fa-fire"></i>
                        <span>Ù†Ø´Ø§Ø· Ù…Ø±ØªÙØ¹</span>
                    </div>
                </div>

                <div class="stat-card orange">
                    <div class="stat-header">
                        <span class="stat-title">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¬Ù„Ø³Ø©</span>
                        <div class="stat-icon">
                            <i class="fas fa-user-clock"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="avgSession">0</div>
                    <div class="stat-label">Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…</div>
                    <div class="stat-change positive">
                        <i class="fas fa-chart-line"></i>
                        <span>Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯</span>
                    </div>
                </div>
            </div>

            <!-- Ø¬Ø¯ÙˆÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
            <div class="table-container">
                <div class="table-header">
                    <div class="table-title">
                        <i class="fas fa-user-friends"></i>
                        ØªÙØ§ØµÙŠÙ„ Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                    </div>
                    <input type="text" class="search-box" id="userSearch" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø¬Ù„Ø³Ø©...">
                </div>
                <div class="table-wrapper">
                    <table id="usersTable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                                <th>Ø§Ù„Ù…Ø³Ø§Ø±</th>
                                <th>Ø§Ù„ØµÙ</th>
                                <th>ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
                                <th>Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©</th>
                                <th>Ø§Ù„ØµÙØ­Ø§Øª</th>
                                <th>Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr>
                                <td colspan="9" style="text-align: center; padding: 40px; color: #95a5a6;">
                                    <i class="fas fa-spinner fa-spin" style="font-size: 32px; margin-bottom: 15px;"></i>
                                    <p style="font-weight: 600;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø§Øª -->
            <div class="chart-container">
                <div class="chart-title">
                    <i class="fas fa-file-alt"></i>
                    ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ ØµÙØ­Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹
                </div>
                <div id="pageTimeDistribution"></div>
            </div>

            <!-- Ø£ÙƒØ«Ø± Ø§Ù„ÙƒØªØ¨ ØªØ­Ù…ÙŠÙ„Ø§Ù‹ -->
            <div class="chart-container">
                <div class="chart-title">
                    <i class="fas fa-book"></i>
                    Ø£ÙƒØ«Ø± Ø§Ù„ÙƒØªØ¨ ØªØ­Ù…ÙŠÙ„Ø§Ù‹ (Top 10)
                </div>
                <div id="topDownloads"></div>
            </div>

            <!-- Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ -->
            <div class="chart-container">
                <div class="chart-title">
                    <i class="fas fa-chart-bar"></i>
                    Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…)
                </div>
                <div id="dailyActivity"></div>
            </div>
        </div>
    </div>

    <script src="global-tracking.js"></script>
    <script>
        // ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø¸Ù‡Ø§Ø± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        function togglePassword() {
            const input = document.getElementById('adminPassword');
            const icon = document.querySelector('.toggle-password');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const password = document.getElementById('adminPassword').value;
            const loginBtn = document.querySelector('.login-btn');
            const errorDiv = document.getElementById('loginError');
            
            loginBtn.innerHTML = '<div class="loading"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
            loginBtn.disabled = true;
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            if (password === 'admin@abrar2025') {
                errorDiv.style.display = 'none';
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('statsContainer').style.display = 'block';
                initializeTimeTracking();
                loadStatistics();
            } else {
                errorDiv.textContent = 'âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
                errorDiv.style.display = 'block';
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> <span>Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>';
                loginBtn.disabled = false;
                document.getElementById('adminPassword').value = '';
            }
        });

        // ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„ÙˆÙ‚Øª
        function initializeTimeTracking() {
            if (!localStorage.getItem('timeTracking')) {
                const timeTracking = {
                    sessions: {},
                    pageTotals: {},
                    startTime: Date.now()
                };
                localStorage.setItem('timeTracking', JSON.stringify(timeTracking));
            }

            // Ø¨Ø¯Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ù„Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            const sessionId = sessionStorage.getItem('sessionId') || generateSessionId();
            sessionStorage.setItem('sessionId', sessionId);
            
            startTimeTracking(sessionId);
        }

        // ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù Ø¬Ù„Ø³Ø© ÙØ±ÙŠØ¯
        function generateSessionId() {
            return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Ø¨Ø¯Ø¡ ØªØªØ¨Ø¹ Ø§Ù„ÙˆÙ‚Øª
        function startTimeTracking(sessionId) {
            const timeTracking = JSON.parse(localStorage.getItem('timeTracking') || '{}');
            
            if (!timeTracking.sessions) timeTracking.sessions = {};
            if (!timeTracking.sessions[sessionId]) {
                timeTracking.sessions[sessionId] = {
                    loginTime: new Date().toISOString(),
                    pages: {},
                    downloads: 0,
                    lastActive: Date.now()
                };
            }

            const currentPage = window.location.pathname.split('/').pop() || 'statistics.html';
            const pageStartTime = Date.now();

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
            const trackingInterval = setInterval(() => {
                const timeTracking = JSON.parse(localStorage.getItem('timeTracking') || '{}');
                if (!timeTracking.sessions[sessionId]) return;

                const elapsed = Date.now() - pageStartTime;
                timeTracking.sessions[sessionId].pages[currentPage] = elapsed;
                timeTracking.sessions[sessionId].lastActive = Date.now();

                // ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª Ù„Ù„ØµÙØ­Ø©
                if (!timeTracking.pageTotals) timeTracking.pageTotals = {};
                timeTracking.pageTotals[currentPage] = (timeTracking.pageTotals[currentPage] || 0) + 1000;

                localStorage.setItem('timeTracking', JSON.stringify(timeTracking));
            }, 1000);

            // Ø­ÙØ¸ Ù…Ø¹Ø±Ù Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ
            window.trackingIntervalId = trackingInterval;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function loadStatistics() {
            updateLastUpdateTime();
            loadUserStats();
            loadSessionData();
            loadPageTimeDistribution();
            loadTopDownloads();
            loadDailyActivity();
            
            // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
            setInterval(() => {
                updateLastUpdateTime();
                loadUserStats();
                loadSessionData();
                loadPageTimeDistribution();
            }, 10000);
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« (Ù…ÙŠÙ„Ø§Ø¯ÙŠ)
        function updateLastUpdateTime() {
            const now = new Date();
            const options = {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            const timeString = now.toLocaleString('en-US', options);
            document.getElementById('lastUpdate').textContent = timeString;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        function loadUserStats() {
            const stats = JSON.parse(localStorage.getItem('siteStats') || '{}');
            const timeTracking = JSON.parse(localStorage.getItem('timeTracking') || '{}');
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            const totalUsers = Object.keys(timeTracking.sessions || {}).length;
            document.getElementById('totalUsers').textContent = totalUsers;
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª
            const downloads = stats.downloads || {};
            const totalDownloads = Object.values(downloads).reduce((sum, count) => sum + count, 0);
            document.getElementById('totalDownloads').textContent = totalDownloads;
            
            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª
            const sessions = timeTracking.sessions || {};
            let totalMilliseconds = 0;
            Object.values(sessions).forEach(session => {
                const pages = session.pages || {};
                Object.values(pages).forEach(pageTime => {
                    totalMilliseconds += pageTime;
                });
            });
            const totalHours = (totalMilliseconds / 3600000).toFixed(1);
            document.getElementById('totalTime').textContent = totalHours;
            
            // Ø²ÙˆØ§Ø± Ø§Ù„ÙŠÙˆÙ…
            const today = new Date().toDateString();
            const todayDownloads = stats.todayDownloads || {};
            const todayVisitors = todayDownloads[today] || 0;
            document.getElementById('todayVisitors').textContent = todayVisitors;

            // Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø¬Ù„Ø³Ø©
            const avgMinutes = totalUsers > 0 ? (totalMilliseconds / totalUsers / 60000).toFixed(1) : 0;
            document.getElementById('avgSession').textContent = avgMinutes;
        }

        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ù„ØµÙŠØºØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©
        function formatDuration(milliseconds) {
            const seconds = Math.floor(milliseconds / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            
            if (hours > 0) {
                return `${hours}Ø³ ${minutes % 60}Ø¯`;
            } else if (minutes > 0) {
                return `${minutes}Ø¯ ${seconds % 60}Ø«`;
            } else {
                return `${seconds}Ø«`;
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø§Øª
        function loadSessionData() {
            const timeTracking = JSON.parse(localStorage.getItem('timeTracking') || '{}');
            const sessions = timeTracking.sessions || {};
            const tbody = document.getElementById('usersTableBody');
            
            if (Object.keys(sessions).length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="9" class="no-data">
                            <i class="fas fa-inbox"></i>
                            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø¨Ø¹Ø¯</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            let html = '';
            const sortedSessions = Object.entries(sessions).sort((a, b) => {
                return new Date(b[1].loginTime) - new Date(a[1].loginTime);
            });

            sortedSessions.forEach(([sessionId, session], index) => {
                const pages = session.pages || {};
                const totalTime = Object.values(pages).reduce((sum, time) => sum + time, 0);
                
                const loginTime = session.loginTime ? new Date(session.loginTime).toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                }) : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                
                const pageCount = Object.keys(pages).length;
                const downloads = session.downloads || 0;
                
                const isActive = (Date.now() - session.lastActive) < 300000; // Ù†Ø´Ø· Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 5 Ø¯Ù‚Ø§Ø¦Ù‚
                const statusBadge = isActive ? 
                    '<span class="badge badge-success">ğŸŸ¢ Ù†Ø´Ø·</span>' : 
                    '<span class="badge badge-warning">ğŸŸ¡ ØºÙŠØ± Ù†Ø´Ø·</span>';
                
                const userName = session.userName || 'Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const curriculum = session.curriculum || '-';
                const grade = session.grade || '-';
                
                // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…Ø³Ø§Ø± Ø¨Ø§Ù„Ø¹Ù„Ù…
                const curriculumDisplay = curriculum === 'Ø³Ø¹ÙˆØ¯ÙŠ' ? 'ğŸ‡¸ğŸ‡¦ Ø³Ø¹ÙˆØ¯ÙŠ' : 
                                         curriculum === 'Ù…ØµØ±ÙŠ' ? 'ğŸ‡ªğŸ‡¬ Ù…ØµØ±ÙŠ' : curriculum;
                
                html += `
                    <tr>
                        <td><strong>${index + 1}</strong></td>
                        <td><strong style="color: #2c3e50;">${userName}</strong></td>
                        <td>${curriculumDisplay}</td>
                        <td>${grade}</td>
                        <td>${loginTime}</td>
                        <td><strong style="color: #3498db;">${formatDuration(totalTime)}</strong></td>
                        <td><span class="badge badge-info">${pageCount} ØµÙØ­Ø©</span></td>
                        <td><strong style="color: #27ae60;">${downloads}</strong></td>
                        <td>${statusBadge}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }

        // ØªØ­Ù…ÙŠÙ„ ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø§Øª
        function loadPageTimeDistribution() {
            const timeTracking = JSON.parse(localStorage.getItem('timeTracking') || '{}');
            const pageTotals = timeTracking.pageTotals || {};
            
            const container = document.getElementById('pageTimeDistribution');
            
            if (Object.keys(pageTotals).length === 0) {
                container.innerHTML = `
                    <div class="no-data">
                        <i class="fas fa-chart-pie"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©</p>
                    </div>
                `;
                return;
            }
            
            const sortedPages = Object.entries(pageTotals)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);
            
            const maxTime = Math.max(...sortedPages.map(([_, time]) => time));
            
            const colors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
            ];
            
            let html = '';
            sortedPages.forEach(([page, time], index) => {
                const percentage = (time / maxTime * 100).toFixed(1);
                const color = colors[index % colors.length];
                
                const pageNames = {
                    'index.html': 'ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                    'book_eg.html': 'ğŸ‡ªğŸ‡¬ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ',
                    'books_sa.html': 'ğŸ‡¸ğŸ‡¦ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ',
                    'about.html': 'â„¹ï¸ Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                    'contact.html': 'ğŸ“ Ø§Ù„ØªÙˆØ§ØµÙ„',
                    'statistics.html': 'ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª'
                };
                
                const displayName = pageNames[page] || `ğŸ“„ ${page}`;
                const duration = formatDuration(time);
                
                html += `
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%; background: ${color};">
                            ${displayName} â€¢ ${duration}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø£ÙƒØ«Ø± Ø§Ù„ÙƒØªØ¨ ØªØ­Ù…ÙŠÙ„Ø§Ù‹
        function loadTopDownloads() {
            const stats = JSON.parse(localStorage.getItem('siteStats') || '{}');
            const downloads = stats.downloads || {};
            
            const container = document.getElementById('topDownloads');
            
            if (Object.keys(downloads).length === 0) {
                container.innerHTML = `
                    <div class="no-data">
                        <i class="fas fa-book-open"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ­Ù…ÙŠÙ„Ø§Øª Ø¨Ø¹Ø¯</p>
                    </div>
                `;
                return;
            }
            
            const sortedDownloads = Object.entries(downloads)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);
            
            const maxDownloads = Math.max(...sortedDownloads.map(([_, count]) => count));
            
            const colors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
            ];
            
            let html = '';
            sortedDownloads.forEach(([book, count], index) => {
                const percentage = (count / maxDownloads * 100).toFixed(1);
                const color = colors[index % colors.length];
                const shortName = book.length > 45 ? book.substring(0, 45) + '...' : book;
                
                html += `
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%; background: ${color};">
                            ğŸ“š ${shortName} â€¢ ${count} ØªØ­Ù…ÙŠÙ„
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ
        function loadDailyActivity() {
            const stats = JSON.parse(localStorage.getItem('siteStats') || '{}');
            const dailyDownloads = stats.todayDownloads || {};
            
            const container = document.getElementById('dailyActivity');
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…
            const last7Days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                last7Days.push(date);
            }
            
            const maxActivity = Math.max(...last7Days.map(date => dailyDownloads[date.toDateString()] || 0), 1);
            
            let html = '<div class="time-distribution">';
            last7Days.forEach(date => {
                const dateStr = date.toDateString();
                const dayName = date.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric' 
                });
                const count = dailyDownloads[dateStr] || 0;
                const percentage = (count / maxActivity * 100).toFixed(1);
                
                const isToday = date.toDateString() === new Date().toDateString();
                const dayLabel = isToday ? 'ğŸ”¥ ' + dayName + ' (Ø§Ù„ÙŠÙˆÙ…)' : dayName;
                
                html += `
                    <div class="time-item">
                        <span class="time-label">${dayLabel}</span>
                        <div style="flex: 1; margin: 0 20px;">
                            <div class="progress-bar" style="margin: 0;">
                                <div class="progress-fill" style="width: ${percentage}%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    ${count > 0 ? count : ''}
                                </div>
                            </div>
                        </div>
                        <span class="time-value">${count} Ù†Ø´Ø§Ø·</span>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        document.getElementById('userSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#usersTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        });

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function refreshStats() {
            const btn = event.target.closest('.btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<div class="loading"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...';
            btn.disabled = true;
            
            setTimeout(() => {
                loadStatistics();
                btn.innerHTML = originalHTML;
                btn.disabled = false;
                
                showToast('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­');
            }, 1500);
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Excel
        function exportToExcel() {
            const btn = event.target.closest('.btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<div class="loading"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±...';
            btn.disabled = true;
            
            setTimeout(() => {
                try {
                    const timeTracking = JSON.parse(localStorage.getItem('timeTracking') || '{}');
                    const siteStats = JSON.parse(localStorage.getItem('siteStats') || '{}');
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØªØ§Ø¨ Excel
                    const wb = XLSX.utils.book_new();
                    
                    // ÙˆØ±Ù‚Ø© 1: Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                    const summaryData = [
                        ['ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©'],
                        [],
                        ['Ø§Ù„Ù…Ø¤Ø´Ø±', 'Ø§Ù„Ù‚ÙŠÙ…Ø©'],
                        ['Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', Object.keys(timeTracking.sessions || {}).length],
                        ['Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª', Object.values(siteStats.downloads || {}).reduce((sum, count) => sum + count, 0)],
                        ['ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±', new Date().toLocaleString('en-US')],
                        []
                    ];
                    const ws1 = XLSX.utils.aoa_to_sheet(summaryData);
                    XLSX.utils.book_append_sheet(wb, ws1, 'Ø§Ù„Ù…Ù„Ø®Øµ');
                    
                    // ÙˆØ±Ù‚Ø© 2: ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
                    const sessionsData = [['#', 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', 'Ø§Ù„Ù…Ø³Ø§Ø±', 'Ø§Ù„ØµÙ', 'ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„', 'Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© (Ø¯Ù‚Ø§Ø¦Ù‚)', 'Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª', 'Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª', 'Ø§Ù„Ø­Ø§Ù„Ø©']];
                    Object.entries(timeTracking.sessions || {}).forEach(([sessionId, session], index) => {
                        const pages = session.pages || {};
                        const totalTime = Object.values(pages).reduce((sum, time) => sum + time, 0);
                        const minutes = (totalTime / 60000).toFixed(2);
                        const loginTime = new Date(session.loginTime).toLocaleString('en-US');
                        const isActive = (Date.now() - session.lastActive) < 300000;
                        
                        sessionsData.push([
                            index + 1,
                            session.userName || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                            session.curriculum || '-',
                            session.grade || '-',
                            loginTime,
                            minutes,
                            Object.keys(pages).length,
                            session.downloads || 0,
                            isActive ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·'
                        ]);
                    });
                    const ws2 = XLSX.utils.aoa_to_sheet(sessionsData);
                    XLSX.utils.book_append_sheet(wb, ws2, 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª');
                    
                    // ÙˆØ±Ù‚Ø© 3: ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø§Øª
                    const pagesData = [['Ø§Ù„ØµÙØ­Ø©', 'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø¯Ù‚Ø§Ø¦Ù‚)', 'Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©']];
                    const pageTotals = timeTracking.pageTotals || {};
                    const totalPageTime = Object.values(pageTotals).reduce((sum, time) => sum + time, 0);
                    
                    Object.entries(pageTotals)
                        .sort((a, b) => b[1] - a[1])
                        .forEach(([page, time]) => {
                            const minutes = (time / 60000).toFixed(2);
                            const percentage = ((time / totalPageTime) * 100).toFixed(2) + '%';
                            pagesData.push([page, minutes, percentage]);
                        });
                    const ws3 = XLSX.utils.aoa_to_sheet(pagesData);
                    XLSX.utils.book_append_sheet(wb, ws3, 'Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø§Øª');
                    
                    // ÙˆØ±Ù‚Ø© 4: Ø£ÙƒØ«Ø± Ø§Ù„ÙƒØªØ¨ ØªØ­Ù…ÙŠÙ„Ø§Ù‹
                    const downloadsData = [['Ø§Ù„ØªØ±ØªÙŠØ¨', 'Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨', 'Ø¹Ø¯Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª']];
                    Object.entries(siteStats.downloads || {})
                        .sort((a, b) => b[1] - a[1])
                        .forEach(([book, count], index) => {
                            downloadsData.push([index + 1, book, count]);
                        });
                    const ws4 = XLSX.utils.aoa_to_sheet(downloadsData);
                    XLSX.utils.book_append_sheet(wb, ws4, 'Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø£ÙƒØ«Ø± ØªØ­Ù…ÙŠÙ„Ø§Ù‹');
                    
                    // ÙˆØ±Ù‚Ø© 5: Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ
                    const dailyData = [['Ø§Ù„ØªØ§Ø±ÙŠØ®', 'Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù†Ø´Ø·Ø©']];
                    const dailyDownloads = siteStats.todayDownloads || {};
                    Object.entries(dailyDownloads)
                        .sort((a, b) => new Date(a[0]) - new Date(b[0]))
                        .forEach(([date, count]) => {
                            dailyData.push([new Date(date).toLocaleDateString('en-US'), count]);
                        });
                    const ws5 = XLSX.utils.aoa_to_sheet(dailyData);
                    XLSX.utils.book_append_sheet(wb, ws5, 'Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ');
                    
                    // ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù
                    const fileName = `Abrar_Statistics_${new Date().toISOString().split('T')[0]}.xlsx`;
                    XLSX.writeFile(wb, fileName);
                    
                    showToast('âœ… ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Excel');
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµØ¯ÙŠØ±. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
                
                btn.innerHTML = originalHTML;
                btn.disabled = false;
            }, 1000);
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ\n\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!')) {
                if (confirm('âš ï¸ ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©')) {
                    localStorage.removeItem('timeTracking');
                    localStorage.removeItem('siteStats');
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø©
                    initializeTimeTracking();
                    loadStatistics();
                    
                    showToast('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                }
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'success-toast';
            toast.innerHTML = `
                <i class="fas fa-check-circle" style="font-size: 20px;"></i>
                <span>${message}</span>
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        function logout() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŸ')) {
                // Ø¥ÙŠÙ‚Ø§Ù ØªØªØ¨Ø¹ Ø§Ù„ÙˆÙ‚Øª
                if (window.trackingIntervalId) {
                    clearInterval(window.trackingIntervalId);
                }
                
                document.getElementById('statsContainer').style.display = 'none';
                document.getElementById('loginContainer').style.display = 'flex';
                document.getElementById('adminPassword').value = '';
                
                showToast('ğŸ‘‹ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„ÙŠØ©
            if (!localStorage.getItem('siteStats')) {
                localStorage.setItem('siteStats', JSON.stringify({
                    downloads: {},
                    todayDownloads: {}
                }));
            }
        });

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('beforeunload', function() {
            if (window.trackingIntervalId) {
                clearInterval(window.trackingIntervalId);
            }
        });
        // ============ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ============

// ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨ Ù„Ù„Ù…Ø´Ø±Ù
function loadBookManagementInterface() {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù
    const isAdmin = document.getElementById('statsContainer').style.display !== 'none';
    
    if (isAdmin) {
        // Ø¥Ø¶Ø§ÙØ© CSS Ù…Ø®ØµØµ
        const styles = `
            <style>
                .admin-book-management {
                    background: rgba(255, 255, 255, 0.98);
                    padding: 30px;
                    border-radius: 20px;
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
                    margin-bottom: 30px;
                    border: 1px solid rgba(255, 255, 255, 0.3);
                }
                
                .admin-stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin-bottom: 25px;
                }
                
                .admin-controls {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 20px;
                    flex-wrap: wrap;
                    gap: 15px;
                }
                
                .filter-controls {
                    display: flex;
                    gap: 10px;
                    align-items: center;
                }
                
                .btn-sm {
                    padding: 8px 15px;
                    font-size: 13px;
                }
                
                .books-table-container {
                    overflow-x: auto;
                    border-radius: 12px;
                    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
                }
            </style>
        `;
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
        if (!document.querySelector('#admin-book-styles')) {
            document.head.insertAdjacentHTML('beforeend', styles.replace('<style>', '<style id="admin-book-styles">'));
        }
        
        // ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´Ø±Ù
        setTimeout(() => {
            if (typeof AdminBookControls !== 'undefined') {
                AdminBookControls.initAdminInterface();
            }
        }, 1000);
    }
}

// ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© loadStatistics Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨
const originalLoadStatistics = window.loadStatistics;
window.loadStatistics = function() {
    if (originalLoadStatistics) {
        originalLoadStatistics();
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    setTimeout(loadBookManagementInterface, 1500);
};

// ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù
document.getElementById('loginForm')?.addEventListener('submit', function(e) {
    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
    const originalSubmit = this.onsubmit;
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø¥Ø¶Ø§ÙÙŠ
    setTimeout(loadBookManagementInterface, 2000);
});
    </script>
</body>
</html>