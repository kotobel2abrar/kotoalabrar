[file name]: manage.html
[file content begin]
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±</title>
    <link rel="icon" href="Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±.webp" type="image/png" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .login-container {
        max-width: 450px;
        margin: 100px auto;
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        padding: 50px;
        border-radius: 20px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        border: 2px solid #e2e8f0;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .login-container h1 {
        color: #2d3748;
        margin-bottom: 40px;
        font-size: 2em;
        text-align: center;
      }

      .admin-container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        display: none;
      }

      h1 {
        color: #2d3748;
        margin-bottom: 30px;
        text-align: center;
      }

      h2 {
        color: #3182ce;
        margin: 30px 0 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e2e8f0;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        color: #4a5568;
        font-weight: 600;
        margin-bottom: 8px;
      }

      input[type="text"],
      input[type="password"],
      select {
        width: 100%;
        padding: 14px;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        font-size: 1em;
        transition: all 0.3s ease;
        background: white;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #3182ce;
        box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
      }

      .btn {
        background: linear-gradient(135deg, #2c5282 0%, #2d3748 100%);
        color: white;
        border: none;
        padding: 14px 25px;
        border-radius: 10px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 7px 20px rgba(44, 82, 130, 0.3);
      }

      .btn-danger {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      }

      .btn-danger:hover {
        box-shadow: 0 7px 20px rgba(231, 76, 60, 0.3);
      }

      .btn-small {
        padding: 8px 16px;
        font-size: 0.9em;
        min-width: auto;
      }

      .books-list {
        margin-top: 30px;
      }

      .book-item {
        background: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
      }

      .book-item:hover {
        border-color: #3182ce;
        box-shadow: 0 5px 20px rgba(49, 130, 206, 0.1);
        transform: translateY(-3px);
      }

      .book-item-info {
        flex: 1;
        margin-left: 20px;
      }

      .book-item-title {
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 8px;
        font-size: 1.1em;
      }

      .book-item-details {
        color: #718096;
        font-size: 0.9em;
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .book-item-details span {
        background: #f7fafc;
        padding: 4px 10px;
        border-radius: 6px;
        border: 1px solid #e2e8f0;
      }

      .book-item-actions {
        display: flex;
        gap: 10px;
      }

      /* ØªØ­Ø³ÙŠÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
      .tabs {
        display: flex;
        gap: 5px;
        margin-bottom: 30px;
        background: #f1f5f9;
        padding: 10px;
        border-radius: 12px;
      }

      .tab {
        padding: 15px 30px;
        background: white;
        border: 2px solid #e2e8f0;
        color: #4a5568;
        font-weight: 600;
        cursor: pointer;
        border-radius: 8px;
        transition: all 0.3s ease;
        flex: 1;
        text-align: center;
      }

      .tab:hover {
        border-color: #3182ce;
        transform: translateY(-2px);
      }

      .tab.active {
        background: linear-gradient(135deg, #2c5282 0%, #2d3748 100%);
        color: white;
        border-color: #2c5282;
        box-shadow: 0 4px 15px rgba(44, 82, 130, 0.2);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .logout-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        background: #e74c3c;
      }

      .success-message {
        background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 25px;
        display: none;
        animation: slideIn 0.3s ease;
        box-shadow: 0 4px 15px rgba(39, 174, 96, 0.2);
      }

      .error-message {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin-top: 15px;
        display: none;
        animation: slideIn 0.3s ease;
        box-shadow: 0 4px 15px rgba(231, 76, 60, 0.2);
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .manage-section {
        background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 30px;
        border: 2px solid #e2e8f0;
      }

      .manage-section h3 {
        color: #2d3748;
        margin-bottom: 20px;
        font-size: 1.3em;
        padding-bottom: 10px;
        border-bottom: 2px solid #e2e8f0;
      }

      .list-inline {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        background: white;
        padding: 10px 15px;
        border-radius: 25px;
        border: 2px solid #e2e8f0;
        display: inline-flex;
        gap: 10px;
        align-items: center;
        margin: 5px;
        transition: all 0.3s ease;
      }

      .chip:hover {
        border-color: #3182ce;
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(49, 130, 206, 0.1);
      }

      .upload-area {
        border: 3px dashed #cbd5e0;
        border-radius: 12px;
        padding: 40px 20px;
        text-align: center;
        background: #f8fafc;
        cursor: pointer;
        margin-bottom: 20px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .upload-area:hover {
        border-color: #3182ce;
        background: #edf2f7;
        transform: translateY(-2px);
      }

      .upload-area.dragover {
        border-color: #3182ce;
        background: #ebf8ff;
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(49, 130, 206, 0.4); }
        70% { box-shadow: 0 0 0 15px rgba(49, 130, 206, 0); }
        100% { box-shadow: 0 0 0 0 rgba(49, 130, 206, 0); }
      }

      .upload-icon {
        font-size: 3em;
        color: #718096;
        margin-bottom: 15px;
        transition: all 0.3s ease;
      }

      .upload-area:hover .upload-icon {
        color: #3182ce;
        transform: scale(1.1);
      }

      .upload-text {
        color: #2d3748;
        margin-bottom: 8px;
        font-weight: 600;
        font-size: 1.1em;
      }

      .upload-subtext {
        color: #a0aec0;
        font-size: 0.9em;
      }

      .upload-preview {
        margin-top: 20px;
        max-width: 100%;
        border-radius: 8px;
        overflow: hidden;
        border: 2px solid #e2e8f0;
      }

      .uploaded-file {
        background: linear-gradient(135deg, #e6fffa 0%, #d6f7ee 100%);
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border: 2px solid #38b2ac;
        animation: slideIn 0.3s ease;
      }

      .backup-section {
        margin: 30px 0;
        padding: 25px;
        background: linear-gradient(135deg, #e6fffa 0%, #d6f7ee 100%);
        border-radius: 15px;
        text-align: center;
        border: 2px dashed #38b2ac;
      }

      .backup-section h3 {
        color: #2d3748;
        margin-bottom: 20px;
        font-size: 1.3em;
      }

      .backup-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 15px;
        flex-wrap: wrap;
      }

      .backup-btn {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        border: none;
        padding: 14px 25px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        min-width: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .backup-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 7px 20px rgba(52, 152, 219, 0.3);
      }

      .backup-btn.import {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      }

      .backup-btn.delete {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      }

      @media (max-width: 768px) {
        .tabs {
          flex-direction: column;
        }
        
        .tab {
          width: 100%;
        }
        
        .book-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 20px;
        }
        
        .book-item-info {
          margin-left: 0;
        }
        
        .book-item-actions {
          width: 100%;
          display: flex;
          gap: 10px;
        }
        
        .book-item-actions .btn {
          flex: 1;
        }
        
        .backup-buttons {
          flex-direction: column;
          align-items: center;
        }
        
        .backup-btn {
          width: 100%;
          max-width: 300px;
        }
        
        .login-container {
          margin: 50px 20px;
          padding: 30px;
        }
        
        .admin-container {
          padding: 20px;
        }
        
        .btn {
          min-width: auto;
          padding: 12px 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginContainer" class="login-container">
      <h1>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
      <div class="form-group">
        <label for="passwordInput">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input
          type="password"
          id="passwordInput"
          placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
        />
      </div>
      <button class="btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
      <p id="loginError" class="error-message" style="display: none">
        ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©
      </p>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <div id="adminContainer" class="admin-container">
      <button class="btn logout-btn btn-danger" onclick="logout()">
        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
      </button>

      <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±</h1>

      <div id="successMessage" class="success-message" style="display: none">
        ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!
      </div>

      <!-- Ù‚Ø³Ù… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ -->
      <div class="backup-section">
        <h3>Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
        <div class="backup-buttons">
          <button class="backup-btn" onclick="exportData()">ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
          <button class="backup-btn import" onclick="importData()">ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</button>
          <button class="backup-btn delete" onclick="clearAllData()">ğŸ—‘ï¸ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
      </div>

      <div class="tabs">
        <button class="tab active" onclick="switchTab('egypt', event)">
          Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ
        </button>
        <button class="tab" onclick="switchTab('saudi', event)">
          Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ
        </button>
      </div>

      <!-- Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ -->
      <div id="egyptTab" class="tab-content active">
        <h2>Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ</h2>

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ØªØ±Ù…Ø§Øª -->
        <div class="manage-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ØªØ±Ù…Ø§Øª</h3>
          <div class="form-group">
            <label>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
            <div id="egyptSubjectsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newEgyptSubject"
                placeholder="Ø£Ø¶Ù Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"
              />
              <button class="btn btn-small" onclick="addEgyptSubject()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†ÙˆØ§Øª</label>
            <div id="egyptYearsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newEgyptYear"
                placeholder="Ø£Ø¶Ù Ø³Ù†Ø© Ù…Ø«Ù„Ø§Ù‹: 2025/2026"
              />
              <button class="btn btn-small" onclick="addEgyptYear()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØªØ±Ù…Ø§Øª</label>
            <div id="egyptTermsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newEgyptTerm"
                placeholder="Ø£Ø¶Ù ØªØ±Ù… Ù…Ø«Ù„: Ø§Ù„Ø£ÙˆÙ„"
              />
              <button class="btn btn-small" onclick="addEgyptTerm()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>
        </div>

        <form id="egyptForm">
          <div class="form-group">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨ *</label>
            <input type="text" id="egyptTitle" required />
          </div>

          <div class="form-group">
            <label>ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="egyptCoverUploadArea" onclick="document.getElementById('egyptCoverFileInput').click()">
              <div class="upload-icon">ğŸ“</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ø§Ù„ØµÙˆØ± (JPG, PNG, GIF)</div>
              <div id="egyptCoverPreview" class="upload-preview" style="display: none;"></div>
              <div id="egyptCoverFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeEgyptCover(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="egyptCoverFileInput" accept="image/*" style="display: none;" />
            <input type="text" id="egyptCoverImage" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ (PDF) *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ù…Ù„Ù PDF Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="egyptPdfUploadArea" onclick="document.getElementById('egyptPdfFileInput').click()">
              <div class="upload-icon">ğŸ“„</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„Ù PDF Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ù…Ù„ÙØ§Øª PDF ÙÙ‚Ø·</div>
              <div id="egyptPdfFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeEgyptPdf(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="egyptPdfFileInput" accept=".pdf" style="display: none;" />
            <input type="text" id="egyptDriveLink" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
            <select id="egyptSubject" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *</label>
            <select id="egyptYear" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØªØ±Ù… *</label>
            <select id="egyptTerm" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ±Ù…</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØµÙ *</label>
            <select id="egyptGrade" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø£ÙˆÙ„ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù†ÙŠ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù„Ø« Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø±Ø§Ø¨Ø¹ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø®Ø§Ù…Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø³Ø§Ø¯Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø£ÙˆÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø«Ø§Ù†ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø«Ø§Ù„Ø« Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù„ØºØ© *</label>
            <select id="egyptLanguage" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</option>
              <option value="Ø¹Ø±Ø¨ÙŠ">Ø¹Ø±Ø¨ÙŠ</option>
              <option value="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</option>
            </select>
          </div>

          <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨</button>
        </form>

        <div class="books-list">
          <h2>Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h2>
          <div id="egyptBooksList">
            <p style="color: #718096; text-align: center; padding: 20px;">
              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯
            </p>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ -->
      <div id="saudiTab" class="tab-content">
        <h2>Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</h2>

        <div class="manage-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ÙØµÙˆÙ„</h3>
          <div class="form-group">
            <label>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
            <div id="saudiSubjectsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newSaudiSubject"
                placeholder="Ø£Ø¶Ù Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"
              />
              <button class="btn btn-small" onclick="addSaudiSubject()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†ÙˆØ§Øª</label>
            <div id="saudiYearsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newSaudiYear"
                placeholder="Ø£Ø¶Ù Ø³Ù†Ø© (Ù…Ø«Ø§Ù„: 2025/2026)"
              />
              <button class="btn btn-small" onclick="addSaudiYear()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ÙØµÙˆÙ„</label>
            <div id="saudiTermsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newSaudiTerm"
                placeholder="Ø£Ø¶Ù ÙØµÙ„ Ù…Ø«Ù„: Ø§Ù„Ø£ÙˆÙ„"
              />
              <button class="btn btn-small" onclick="addSaudiTerm()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>
        </div>

        <form id="saudiForm">
          <div class="form-group">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨ *</label>
            <input type="text" id="saudiTitle" required />
          </div>

          <div class="form-group">
            <label>ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="saudiCoverUploadArea" onclick="document.getElementById('saudiCoverFileInput').click()">
              <div class="upload-icon">ğŸ“</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ø§Ù„ØµÙˆØ± (JPG, PNG, GIF)</div>
              <div id="saudiCoverPreview" class="upload-preview" style="display: none;"></div>
              <div id="saudiCoverFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeSaudiCover(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="saudiCoverFileInput" accept="image/*" style="display: none;" />
            <input type="text" id="saudiCoverImage" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ (PDF) *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ù…Ù„Ù PDF Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="saudiPdfUploadArea" onclick="document.getElementById('saudiPdfFileInput').click()">
              <div class="upload-icon">ğŸ“„</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„Ù PDF Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ù…Ù„ÙØ§Øª PDF ÙÙ‚Ø·</div>
              <div id="saudiPdfFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeSaudiPdf(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="saudiPdfFileInput" accept=".pdf" style="display: none;" />
            <input type="text" id="saudiDriveLink" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
            <select id="saudiSubject" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *</label>
            <select id="saudiYear" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ *</label>
            <select id="saudiTerm" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØµÙ *</label>
            <select id="saudiGrade" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø£ÙˆÙ„ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù†ÙŠ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù„Ø« Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø±Ø§Ø¨Ø¹ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø®Ø§Ù…Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø³Ø§Ø¯Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø·">Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…ØªÙˆØ³Ø·">Ø«Ø§Ù†ÙŠ Ù…ØªÙˆØ³Ø·</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…ØªÙˆØ³Ø·">Ø«Ø§Ù„Ø« Ù…ØªÙˆØ³Ø·</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù„ØºØ© *</label>
            <select id="saudiLanguage" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</option>
              <option value="Ø¹Ø±Ø¨ÙŠ">Ø¹Ø±Ø¨ÙŠ</option>
              <option value="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</option>
            </select>
          </div>

          <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨</button>
        </form>

        <div class="books-list">
          <h2>Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h2>
          <div id="saudiBooksList">
            <p style="color: #718096; text-align: center; padding: 20px;">
              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      const ADMIN_PASSWORD = "AbrarSchools@2025!SecurePass";

      // Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      const DEFAULT_DATA = {
        egypt: {
          subjects: [
            "Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
            "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©",
            "Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",
            "Ø¹Ù„ÙˆÙ…",
            "Ø¯Ø±Ø§Ø³Ø§Øª",
            "ØªØ±Ø¨ÙŠØ© Ø¯ÙŠÙ†ÙŠØ©",
            "Ø­Ø§Ø³Ø¨ Ø¢Ù„ÙŠ",
            "ØªØ±Ø¨ÙŠØ© ÙÙ†ÙŠØ©",
            "Ù…Ù‡Ø§Ø±Ø§Øª Ø­ÙŠØ§ØªÙŠØ©",
            "ØªØ±Ø¨ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©",
          ],
          years: ["2024/2025", "2025/2026"],
          terms: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø«Ø§Ù†ÙŠ"],
          books: [],
        },
        saudi: {
          subjects: [
            "Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
            "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©",
            "Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",
            "Ø¹Ù„ÙˆÙ…",
            "Ù‚Ø±Ø¢Ù†",
            "ØªÙˆØ­ÙŠØ¯",
            "ÙÙ‚Ù‡",
            "ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
            "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",
            "Ø­Ø§Ø³Ø¨ Ø¢Ù„ÙŠ",
          ],
          years: ["2024/2025", "2025/2026"],
          terms: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø«Ø§Ù†ÙŠ"],
          books: [],
        },
      };

      // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±ÙØ¹
      let egyptCoverFile = null;
      let egyptPdfFile = null;
      let saudiCoverFile = null;
      let saudiPdfFile = null;

      // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø©
      function login() {
        const password = document.getElementById("passwordInput").value;
        if (password === ADMIN_PASSWORD) {
          document.getElementById("loginContainer").style.display = "none";
          document.getElementById("adminContainer").style.display = "block";
          sessionStorage.setItem("adminLoggedIn", "true");
          initData();
          loadBooks();
          setupUploadAreas();
          showSuccess("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
        } else {
          document.getElementById("loginError").style.display = "block";
          setTimeout(() => {
            document.getElementById("loginError").style.display = "none";
          }, 3000);
        }
      }

      function logout() {
        sessionStorage.removeItem("adminLoggedIn");
        document.getElementById("loginContainer").style.display = "block";
        document.getElementById("adminContainer").style.display = "none";
        document.getElementById("passwordInput").value = "";
        showSuccess("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­!");
      }

      function checkSession() {
        if (sessionStorage.getItem("adminLoggedIn")) {
          document.getElementById("loginContainer").style.display = "none";
          document.getElementById("adminContainer").style.display = "block";
          initData();
          loadBooks();
          setupUploadAreas();
          return true;
        }
        return false;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
      if (checkSession()) {
        console.log("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹");
      }

      function switchTab(tab, ev) {
        document.querySelectorAll(".tab").forEach((t) => t.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach((c) => c.classList.remove("active"));
        if (ev && ev.target) ev.target.classList.add("active");
        document.getElementById(tab + "Tab").classList.add("active");
      }

      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      function initData() {
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ±ÙŠØ©
        let egyptData = JSON.parse(localStorage.getItem("egyptData"));
        if (!egyptData) {
          egyptData = DEFAULT_DATA.egypt;
          localStorage.setItem("egyptData", JSON.stringify(egyptData));
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
        let saudiData = JSON.parse(localStorage.getItem("saudiData"));
        if (!saudiData) {
          saudiData = DEFAULT_DATA.saudi;
          localStorage.setItem("saudiData", JSON.stringify(saudiData));
        }
        
        populateEgyptControls();
        populateSaudiControls();
      }

      // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø±ÙØ¹
      function setupUploadAreas() {
        // Ù…ØµØ± - ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
        const egyptCoverArea = document.getElementById('egyptCoverUploadArea');
        const egyptCoverInput = document.getElementById('egyptCoverFileInput');
        
        egyptCoverArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          egyptCoverArea.classList.add('dragover');
        });
        
        egyptCoverArea.addEventListener('dragleave', () => {
          egyptCoverArea.classList.remove('dragover');
        });
        
        egyptCoverArea.addEventListener('drop', (e) => {
          e.preventDefault();
          egyptCoverArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleEgyptCoverFile(files[0]);
          }
        });
        
        egyptCoverInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleEgyptCoverFile(e.target.files[0]);
          }
        });
        
        // Ù…ØµØ± - Ù…Ù„Ù PDF
        const egyptPdfArea = document.getElementById('egyptPdfUploadArea');
        const egyptPdfInput = document.getElementById('egyptPdfFileInput');
        
        egyptPdfArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          egyptPdfArea.classList.add('dragover');
        });
        
        egyptPdfArea.addEventListener('dragleave', () => {
          egyptPdfArea.classList.remove('dragover');
        });
        
        egyptPdfArea.addEventListener('drop', (e) => {
          e.preventDefault();
          egyptPdfArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleEgyptPdfFile(files[0]);
          }
        });
        
        egyptPdfInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleEgyptPdfFile(e.target.files[0]);
          }
        });
        
        // Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© - ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
        const saudiCoverArea = document.getElementById('saudiCoverUploadArea');
        const saudiCoverInput = document.getElementById('saudiCoverFileInput');
        
        saudiCoverArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          saudiCoverArea.classList.add('dragover');
        });
        
        saudiCoverArea.addEventListener('dragleave', () => {
          saudiCoverArea.classList.remove('dragover');
        });
        
        saudiCoverArea.addEventListener('drop', (e) => {
          e.preventDefault();
          saudiCoverArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleSaudiCoverFile(files[0]);
          }
        });
        
        saudiCoverInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleSaudiCoverFile(e.target.files[0]);
          }
        });
        
        // Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© - Ù…Ù„Ù PDF
        const saudiPdfArea = document.getElementById('saudiPdfUploadArea');
        const saudiPdfInput = document.getElementById('saudiPdfFileInput');
        
        saudiPdfArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          saudiPdfArea.classList.add('dragover');
        });
        
        saudiPdfArea.addEventListener('dragleave', () => {
          saudiPdfArea.classList.remove('dragover');
        });
        
        saudiPdfArea.addEventListener('drop', (e) => {
          e.preventDefault();
          saudiPdfArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleSaudiPdfFile(files[0]);
          }
        });
        
        saudiPdfInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleSaudiPdfFile(e.target.files[0]);
          }
        });
      }
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„ÙØ§Øª Ù…ØµØ± - ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
      function handleEgyptCoverFile(file) {
        if (!file.type.match('image.*')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙÙ‚Ø·');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          // Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ§Ù†Ø§Øª base64 ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ±
          egyptCoverFile = { 
            data: e.target.result,
            name: file.name,
            type: file.type 
          };
          
          document.getElementById('egyptCoverFileInfo').style.display = 'flex';
          document.getElementById('egyptCoverImage').value = e.target.result; // Ø­ÙØ¸ base64 ÙÙŠ Ø­Ù‚Ù„ Ø§Ù„ØµÙˆØ±Ø©
          
          const preview = document.getElementById('egyptCoverPreview');
          preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; border-radius: 5px;">`;
          preview.style.display = 'block';
        };
        
        reader.readAsDataURL(file);
      }
      
      function removeEgyptCover(e) {
        e.stopPropagation();
        egyptCoverFile = null;
        document.getElementById('egyptCoverFileInfo').style.display = 'none';
        document.getElementById('egyptCoverPreview').style.display = 'none';
        document.getElementById('egyptCoverImage').value = '';
        document.getElementById('egyptCoverFileInput').value = '';
      }
      
      function handleEgyptPdfFile(file) {
        if (!file.name.toLowerCase().endsWith('.pdf')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù PDF ÙÙ‚Ø·');
          return;
        }
        
        egyptPdfFile = file;
        document.getElementById('egyptPdfFileInfo').style.display = 'flex';
        document.getElementById('egyptDriveLink').value = file.name;
      }
      
      function removeEgyptPdf(e) {
        e.stopPropagation();
        egyptPdfFile = null;
        document.getElementById('egyptPdfFileInfo').style.display = 'none';
        document.getElementById('egyptDriveLink').value = '';
        document.getElementById('egyptPdfFileInput').value = '';
      }
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© - ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
      function handleSaudiCoverFile(file) {
        if (!file.type.match('image.*')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙÙ‚Ø·');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          // Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ§Ù†Ø§Øª base64 ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ±
          saudiCoverFile = { 
            data: e.target.result,
            name: file.name,
            type: file.type 
          };
          
          document.getElementById('saudiCoverFileInfo').style.display = 'flex';
          document.getElementById('saudiCoverImage').value = e.target.result; // Ø­ÙØ¸ base64 ÙÙŠ Ø­Ù‚Ù„ Ø§Ù„ØµÙˆØ±Ø©
          
          const preview = document.getElementById('saudiCoverPreview');
          preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; border-radius: 5px;">`;
          preview.style.display = 'block';
        };
        
        reader.readAsDataURL(file);
      }
      
      function removeSaudiCover(e) {
        e.stopPropagation();
        saudiCoverFile = null;
        document.getElementById('saudiCoverFileInfo').style.display = 'none';
        document.getElementById('saudiCoverPreview').style.display = 'none';
        document.getElementById('saudiCoverImage').value = '';
        document.getElementById('saudiCoverFileInput').value = '';
      }
      
      function handleSaudiPdfFile(file) {
        if (!file.name.toLowerCase().endsWith('.pdf')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù PDF ÙÙ‚Ø·');
          return;
        }
        
        saudiPdfFile = file;
        document.getElementById('saudiPdfFileInfo').style.display = 'flex';
        document.getElementById('saudiDriveLink').value = file.name;
      }
      
      function removeSaudiPdf(e) {
        e.stopPropagation();
        saudiPdfFile = null;
        document.getElementById('saudiPdfFileInfo').style.display = 'none';
        document.getElementById('saudiDriveLink').value = '';
        document.getElementById('saudiPdfFileInput').value = '';
      }

      // ----- ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ØªØ±Ù…Ø§Øª - Ù…ØµØ± -----
      function getEgyptData() {
        const data = JSON.parse(localStorage.getItem("egyptData") || JSON.stringify(DEFAULT_DATA.egypt));
        if (!data.books) data.books = [];
        if (!data.subjects) data.subjects = DEFAULT_DATA.egypt.subjects;
        if (!data.years) data.years = DEFAULT_DATA.egypt.years;
        if (!data.terms) data.terms = DEFAULT_DATA.egypt.terms;
        return data;
      }
      
      function saveEgyptData(data) {
        localStorage.setItem("egyptData", JSON.stringify(data));
        populateEgyptControls();
        populateEgyptFormOptions();
        showSuccess("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ±ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!");
        console.log("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ±ÙŠØ©ØŒ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯:", data.subjects.length, "Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨:", data.books.length);
      }

      function populateEgyptControls() {
        const data = getEgyptData();
        
        // Ø§Ù„Ù…ÙˆØ§Ø¯
        const subjectsContainer = document.getElementById("egyptSubjectsList");
        subjectsContainer.innerHTML = "";
        data.subjects.forEach((s, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${s}</span><button class='btn-small' onclick='deleteEgyptSubject(${i})'>Ø­Ø°Ù</button>`;
          subjectsContainer.appendChild(chip);
        });

        // Ø§Ù„Ø³Ù†ÙˆØ§Øª
        const yearsContainer = document.getElementById("egyptYearsList");
        yearsContainer.innerHTML = "";
        data.years.forEach((y, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${y}</span><button class='btn-small' onclick='deleteEgyptYear(${i})'>Ø­Ø°Ù</button>`;
          yearsContainer.appendChild(chip);
        });

        // Ø§Ù„ØªØ±Ù…Ø§Øª
        const termsContainer = document.getElementById("egyptTermsList");
        termsContainer.innerHTML = "";
        data.terms.forEach((t, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${t}</span><button class='btn-small' onclick='deleteEgyptTerm(${i})'>Ø­Ø°Ù</button>`;
          termsContainer.appendChild(chip);
        });

        populateEgyptFormOptions();
      }

      function populateEgyptFormOptions() {
        const data = getEgyptData();
        const subjectSelect = document.getElementById("egyptSubject");
        subjectSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>`;
        data.subjects.forEach((s) => {
          const opt = document.createElement("option");
          opt.value = s;
          opt.textContent = s;
          subjectSelect.appendChild(opt);
        });

        const yearSelect = document.getElementById("egyptYear");
        yearSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>`;
        data.years.forEach((y) => {
          const opt = document.createElement("option");
          opt.value = y;
          opt.textContent = y;
          yearSelect.appendChild(opt);
        });

        const termSelect = document.getElementById("egyptTerm");
        termSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ±Ù…</option>`;
        data.terms.forEach((t) => {
          const opt = document.createElement("option");
          opt.value = t;
          opt.textContent = t;
          termSelect.appendChild(opt);
        });
      }

      function addEgyptSubject() {
        const val = document.getElementById("newEgyptSubject").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„Ø§");
        const data = getEgyptData();
        data.subjects.push(val);
        saveEgyptData(data);
        document.getElementById("newEgyptSubject").value = "";
      }

      function deleteEgyptSubject(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø©ØŸ")) return;
        const data = getEgyptData();
        data.subjects.splice(index, 1);
        saveEgyptData(data);
      }

      function addEgyptYear() {
        const val = document.getElementById("newEgyptYear").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ù†Ø© Ø£ÙˆÙ„Ø§");
        const data = getEgyptData();
        data.years.push(val);
        saveEgyptData(data);
        document.getElementById("newEgyptYear").value = "";
      }

      function deleteEgyptYear(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù†Ø©ØŸ")) return;
        const data = getEgyptData();
        data.years.splice(index, 1);
        saveEgyptData(data);
      }

      function addEgyptTerm() {
        const val = document.getElementById("newEgyptTerm").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ØªØ±Ù… Ø£ÙˆÙ„Ø§");
        const data = getEgyptData();
        data.terms.push(val);
        saveEgyptData(data);
        document.getElementById("newEgyptTerm").value = "";
      }

      function deleteEgyptTerm(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØ±Ù…ØŸ")) return;
        const data = getEgyptData();
        data.terms.splice(index, 1);
        saveEgyptData(data);
      }

      // ----- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© -----
      function getSaudiData() {
        const data = JSON.parse(localStorage.getItem("saudiData") || JSON.stringify(DEFAULT_DATA.saudi));
        if (!data.books) data.books = [];
        if (!data.subjects) data.subjects = DEFAULT_DATA.saudi.subjects;
        if (!data.years) data.years = DEFAULT_DATA.saudi.years;
        if (!data.terms) data.terms = DEFAULT_DATA.saudi.terms;
        return data;
      }
      
      function saveSaudiData(data) {
        localStorage.setItem("saudiData", JSON.stringify(data));
        populateSaudiControls();
        populateSaudiFormOptions();
        showSuccess("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!");
        console.log("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯:", data.subjects.length, "Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨:", data.books.length);
      }

      function populateSaudiControls() {
        const data = getSaudiData();
        
        // Ø§Ù„Ù…ÙˆØ§Ø¯
        const subjectsContainer = document.getElementById("saudiSubjectsList");
        subjectsContainer.innerHTML = "";
        data.subjects.forEach((s, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${s}</span><button class='btn-small' onclick='deleteSaudiSubject(${i})'>Ø­Ø°Ù</button>`;
          subjectsContainer.appendChild(chip);
        });

        // Ø§Ù„Ø³Ù†ÙˆØ§Øª
        const yearsContainer = document.getElementById("saudiYearsList");
        yearsContainer.innerHTML = "";
        data.years.forEach((y, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${y}</span><button class='btn-small' onclick='deleteSaudiYear(${i})'>Ø­Ø°Ù</button>`;
          yearsContainer.appendChild(chip);
        });

        // Ø§Ù„ÙØµÙˆÙ„
        const termsContainer = document.getElementById("saudiTermsList");
        termsContainer.innerHTML = "";
        data.terms.forEach((t, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${t}</span><button class='btn-small' onclick='deleteSaudiTerm(${i})'>Ø­Ø°Ù</button>`;
          termsContainer.appendChild(chip);
        });

        populateSaudiFormOptions();
      }

      function populateSaudiFormOptions() {
        const data = getSaudiData();
        const subjectSelect = document.getElementById("saudiSubject");
        subjectSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>`;
        data.subjects.forEach((s) => {
          const opt = document.createElement("option");
          opt.value = s;
          opt.textContent = s;
          subjectSelect.appendChild(opt);
        });

        const yearSelect = document.getElementById("saudiYear");
        yearSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>`;
        data.years.forEach((y) => {
          const opt = document.createElement("option");
          opt.value = y;
          opt.textContent = y;
          yearSelect.appendChild(opt);
        });

        const termSelect = document.getElementById("saudiTerm");
        termSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„</option>`;
        data.terms.forEach((t) => {
          const opt = document.createElement("option");
          opt.value = t;
          opt.textContent = t;
          termSelect.appendChild(opt);
        });
      }

      function addSaudiSubject() {
        const val = document.getElementById("newSaudiSubject").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„Ø§");
        const data = getSaudiData();
        data.subjects.push(val);
        saveSaudiData(data);
        document.getElementById("newSaudiSubject").value = "";
      }

      function deleteSaudiSubject(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø©ØŸ")) return;
        const data = getSaudiData();
        data.subjects.splice(index, 1);
        saveSaudiData(data);
      }

      function addSaudiYear() {
        const val = document.getElementById("newSaudiYear").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ù†Ø© Ø£ÙˆÙ„Ø§");
        const data = getSaudiData();
        data.years.push(val);
        saveSaudiData(data);
        document.getElementById("newSaudiYear").value = "";
      }

      function deleteSaudiYear(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù†Ø©ØŸ")) return;
        const data = getSaudiData();
        data.years.splice(index, 1);
        saveSaudiData(data);
      }

      function addSaudiTerm() {
        const val = document.getElementById("newSaudiTerm").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ÙØµÙ„ Ø£ÙˆÙ„Ø§");
        const data = getSaudiData();
        data.terms.push(val);
        saveSaudiData(data);
        document.getElementById("newSaudiTerm").value = "";
      }

      function deleteSaudiTerm(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙØµÙ„ØŸ")) return;
        const data = getSaudiData();
        data.terms.splice(index, 1);
        saveSaudiData(data);
      }

      // ----- Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ¨ Ù…Ø¹ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ± ÙƒÙ€ base64 -----
      document.getElementById("egyptForm").addEventListener("submit", function (e) {
        e.preventDefault();
        
        const title = document.getElementById("egyptTitle").value.trim();
        const coverImage = document.getElementById("egyptCoverImage").value.trim();
        const driveLink = document.getElementById("egyptDriveLink").value.trim();
        const subject = document.getElementById("egyptSubject").value;
        const year = document.getElementById("egyptYear").value;
        const term = document.getElementById("egyptTerm").value;
        const grade = document.getElementById("egyptGrade").value;
        const language = document.getElementById("egyptLanguage").value;
        
        if (!title || !subject || !year || !term || !grade || !language) {
          alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
          return;
        }
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ±Ø© base64 Ø¥Ø°Ø§ ØªÙ… Ø±ÙØ¹ Ù…Ù„Ù
        let finalCoverImage = coverImage;
        if (egyptCoverFile && egyptCoverFile.data) {
          finalCoverImage = egyptCoverFile.data;
        } else if (!finalCoverImage) {
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø±Ø§Ø¨Ø·
          finalCoverImage = `https://via.placeholder.com/280x350/e74c3c/ffffff?text=${encodeURIComponent(subject.substring(0, 20))}`;
        }
        
        const data = getEgyptData();
        const book = {
          id: Date.now(),
          title: title,
          drive_link: driveLink || "https://drive.google.com/file/d/EXAMPLE_" + Date.now(),
          cover_image: finalCoverImage,
          subject: subject,
          year: year,
          term: term,
          grade: grade,
          language: language,
          date_added: new Date().toISOString()
        };
        
        data.books.push(book);
        saveEgyptData(data);
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        document.getElementById("egyptTitle").value = "";
        document.getElementById("egyptCoverImage").value = "";
        document.getElementById("egyptDriveLink").value = "";
        document.getElementById("egyptSubject").selectedIndex = 0;
        document.getElementById("egyptYear").selectedIndex = 0;
        document.getElementById("egyptTerm").selectedIndex = 0;
        document.getElementById("egyptGrade").selectedIndex = 0;
        document.getElementById("egyptLanguage").selectedIndex = 0;
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ù„ÙØ§Øª Ø§Ù„Ø±ÙØ¹
        removeEgyptCover({ stopPropagation: () => {} });
        removeEgyptPdf({ stopPropagation: () => {} });
        
        loadEgyptBooks();
        showSuccess("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
      });

      document.getElementById("saudiForm").addEventListener("submit", function (e) {
        e.preventDefault();
        
        const title = document.getElementById("saudiTitle").value.trim();
        const coverImage = document.getElementById("saudiCoverImage").value.trim();
        const driveLink = document.getElementById("saudiDriveLink").value.trim();
        const subject = document.getElementById("saudiSubject").value;
        const year = document.getElementById("saudiYear").value;
        const term = document.getElementById("saudiTerm").value;
        const grade = document.getElementById("saudiGrade").value;
        const language = document.getElementById("saudiLanguage").value;
        
        if (!title || !subject || !year || !term || !grade || !language) {
          alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
          return;
        }
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ±Ø© base64 Ø¥Ø°Ø§ ØªÙ… Ø±ÙØ¹ Ù…Ù„Ù
        let finalCoverImage = coverImage;
        if (saudiCoverFile && saudiCoverFile.data) {
          finalCoverImage = saudiCoverFile.data;
        } else if (!finalCoverImage) {
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø±Ø§Ø¨Ø·
          finalCoverImage = `https://via.placeholder.com/280x350/27ae60/ffffff?text=${encodeURIComponent(subject.substring(0, 20))}`;
        }
        
        const data = getSaudiData();
        const book = {
          id: Date.now(),
          title: title,
          drive_link: driveLink || "https://drive.google.com/file/d/EXAMPLE_" + Date.now(),
          cover_image: finalCoverImage,
          subject: subject,
          year: year,
          term: term,
          grade: grade,
          language: language,
          date_added: new Date().toISOString()
        };
        
        data.books.push(book);
        saveSaudiData(data);
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        document.getElementById("saudiTitle").value = "";
        document.getElementById("saudiCoverImage").value = "";
        document.getElementById("saudiDriveLink").value = "";
        document.getElementById("saudiSubject").selectedIndex = 0;
        document.getElementById("saudiYear").selectedIndex = 0;
        document.getElementById("saudiTerm").selectedIndex = 0;
        document.getElementById("saudiGrade").selectedIndex = 0;
        document.getElementById("saudiLanguage").selectedIndex = 0;
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ù„ÙØ§Øª Ø§Ù„Ø±ÙØ¹
        removeSaudiCover({ stopPropagation: () => {} });
        removeSaudiPdf({ stopPropagation: () => {} });
        
        loadSaudiBooks();
        showSuccess("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
      });

      function loadBooks() {
        loadEgyptBooks();
        loadSaudiBooks();
      }

      function loadEgyptBooks() {
        const data = getEgyptData();
        const books = data.books || [];
        const container = document.getElementById("egyptBooksList");
        
        if (books.length === 0) {
          container.innerHTML = '<p style="color: #718096; text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</p>';
          return;
        }
        
        container.innerHTML = books.map((book, index) => `
          <div class="book-item">
            <div class="book-item-info">
              <div class="book-item-title">${book.title}</div>
              <div class="book-item-details">${book.subject} - ${book.grade} - Ø§Ù„ØªØ±Ù… ${book.term} - ${book.year} - ${book.language}</div>
            </div>
            <div class="book-item-actions">
              <button class="btn btn-small" onclick="editBook('egypt', ${book.id})">ØªØ¹Ø¯ÙŠÙ„</button>
              <button class="btn btn-small btn-danger" onclick="deleteBook('egypt', ${book.id})">Ø­Ø°Ù</button>
              <a class="btn btn-small" href="${book.drive_link}" target="_blank">ÙØªØ­</a>
            </div>
          </div>
        `).join("");
      }

      function loadSaudiBooks() {
        const data = getSaudiData();
        const books = data.books || [];
        const container = document.getElementById("saudiBooksList");
        
        if (books.length === 0) {
          container.innerHTML = '<p style="color: #718096; text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</p>';
          return;
        }
        
        container.innerHTML = books.map((book, index) => `
          <div class="book-item">
            <div class="book-item-info">
              <div class="book-item-title">${book.title}</div>
              <div class="book-item-details">${book.subject} - ${book.grade} - Ø§Ù„ÙØµÙ„ ${book.term} - ${book.year} - ${book.language}</div>
            </div>
            <div class="book-item-actions">
              <button class="btn btn-small" onclick="editBook('saudi', ${book.id})">ØªØ¹Ø¯ÙŠÙ„</button>
              <button class="btn btn-small btn-danger" onclick="deleteBook('saudi', ${book.id})">Ø­Ø°Ù</button>
              <a class="btn btn-small" href="${book.drive_link}" target="_blank">ÙØªØ­</a>
            </div>
          </div>
        `).join("");
      }

      function deleteBook(path, id) {
        if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨ØŸ")) return;
        const keyData = path === "egypt" ? getEgyptData() : getSaudiData();
        keyData.books = keyData.books.filter((b) => b.id !== id);
        if (path === "egypt") saveEgyptData(keyData);
        else saveSaudiData(keyData);
        loadBooks();
        showSuccess("ØªÙ… Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
      }

      function editBook(path, id) {
        const keyData = path === "egypt" ? getEgyptData() : getSaudiData();
        const book = keyData.books.find((b) => b.id === id);
        if (!book) return alert("Ø§Ù„ÙƒØªØ§Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");

        const newTitle = prompt("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨:", book.title) || book.title;
        const newCover = prompt("Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù:", book.cover_image) || book.cover_image;
        const newDrive = prompt("Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨:", book.drive_link) || book.drive_link;
        const newSubject = prompt("Ø§Ù„Ù…Ø§Ø¯Ø©:", book.subject) || book.subject;
        const newYear = prompt("Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:", book.year) || book.year;
        const newTerm = prompt(path === "egypt" ? "Ø§Ù„ØªØ±Ù…:" : "Ø§Ù„ÙØµÙ„:", book.term) || book.term;
        const newGrade = prompt("Ø§Ù„ØµÙ:", book.grade) || book.grade;
        const newLang = prompt("Ø§Ù„Ù„ØºØ©:", book.language) || book.language;

        book.title = newTitle;
        book.cover_image = newCover;
        book.drive_link = newDrive;
        book.subject = newSubject;
        book.year = newYear;
        book.term = newTerm;
        book.grade = newGrade;
        book.language = newLang;

        if (path === "egypt") saveEgyptData(keyData);
        else saveSaudiData(keyData);
        loadBooks();
        showSuccess("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
      }

      function showSuccess(message) {
        const msg = document.getElementById("successMessage");
        msg.textContent = message || "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!";
        msg.style.display = "block";
        
        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ
        msg.style.animation = "slideIn 0.3s ease";
        
        setTimeout(() => {
          msg.style.animation = "none";
          setTimeout(() => {
            msg.style.display = "none";
          }, 300);
        }, 3000);
      }

      // ----- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ± base64 -----
      function exportData() {
        const egyptData = getEgyptData();
        const saudiData = getSaudiData();
        
        const allData = {
          egypt: egyptData,
          saudi: saudiData,
          exportDate: new Date().toISOString(),
          version: "1.1"
        };
        
        const dataStr = JSON.stringify(allData, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        
        const exportFileDefaultName = `abrar-schools-backup-${new Date().toISOString().split('T')[0]}.json`;
        
        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
        
        showSuccess("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
      }

      function importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = e => {
          const file = e.target.files[0];
          const reader = new FileReader();
          
          reader.onload = function(event) {
            try {
              const importedData = JSON.parse(event.target.result);
              
              if (importedData.egypt) {
                localStorage.setItem("egyptData", JSON.stringify(importedData.egypt));
              }
              
              if (importedData.saudi) {
                localStorage.setItem("saudiData", JSON.stringify(importedData.saudi));
              }
              
              initData();
              loadBooks();
              showSuccess("ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
            } catch (error) {
              alert("Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ù: " + error.message);
            }
          };
          
          reader.readAsText(file);
        };
        
        input.click();
      }

      function clearAllData() {
        if (confirm("âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
          localStorage.removeItem("egyptData");
          localStorage.removeItem("saudiData");
          initData();
          loadBooks();
          showSuccess("ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
        }
      }

      // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
      document.getElementById("passwordInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          login();
        }
      });

      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
      document.addEventListener('DOMContentLoaded', function() {
        console.log("ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø§Ù‡Ø²Ø©");
        checkSession();
      });
    </script>
  </body>
</html>
[file content end]