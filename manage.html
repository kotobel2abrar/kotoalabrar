<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±</title>
    <link rel="icon" href="Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±.webp" type="image/png" />
    <style>
      /* Ø£Ø¶ÙØª Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙ‚Ø· */
      .upload-area {
        border: 2px dashed #cbd5e0;
        border-radius: 8px;
        padding: 30px;
        text-align: center;
        background: #f8fafc;
        cursor: pointer;
        margin-bottom: 15px;
        transition: all 0.3s ease;
      }
      
      .upload-area:hover {
        border-color: #3182ce;
        background: #edf2f7;
      }
      
      .upload-area.dragover {
        border-color: #3182ce;
        background: #e6fffa;
      }
      
      .upload-icon {
        font-size: 2em;
        color: #718096;
        margin-bottom: 10px;
      }
      
      .upload-text {
        color: #4a5568;
        margin-bottom: 5px;
      }
      
      .upload-subtext {
        color: #a0aec0;
        font-size: 0.9em;
      }
      
      .upload-preview {
        margin-top: 15px;
        max-width: 200px;
        border-radius: 5px;
      }
      
      .uploaded-file {
        background: #e6fffa;
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    </style>
    <!-- Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£ØµÙ„ÙŠØ© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ -->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .login-container {
        max-width: 400px;
        margin: 100px auto;
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .admin-container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        display: none;
      }

      h1 {
        color: #2d3748;
        margin-bottom: 30px;
        text-align: center;
      }

      h2 {
        color: #3182ce;
        margin: 30px 0 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e2e8f0;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        color: #4a5568;
        font-weight: 600;
        margin-bottom: 8px;
      }

      input[type="text"],
      input[type="password"],
      select {
        width: 100%;
        padding: 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1em;
        transition: border-color 0.3s ease;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #3182ce;
      }

      .btn {
        background: linear-gradient(135deg, #2c5282 0%, #2d3748 100%);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(44, 82, 130, 0.4);
      }

      .btn-danger {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      }

      .btn-small {
        padding: 8px 16px;
        font-size: 0.9em;
      }

      .books-list {
        margin-top: 30px;
      }

      .book-item {
        background: #f7fafc;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .book-item-info {
        flex: 1;
      }

      .book-item-title {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 5px;
      }

      .book-item-details {
        color: #718096;
        font-size: 0.9em;
      }

      .book-item-actions {
        display: flex;
        gap: 10px;
      }

      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        border-bottom: 2px solid #e2e8f0;
      }

      .tab {
        padding: 12px 24px;
        background: none;
        border: none;
        color: #718096;
        font-weight: 600;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.3s ease;
      }

      .tab.active {
        color: #3182ce;
        border-bottom-color: #3182ce;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .logout-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        background: #e74c3c;
      }

      .success-message {
        background: #27ae60;
        color: white;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        display: none;
      }

      .error-message {
        background: #e74c3c;
        color: white;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        display: none;
      }

      .manage-section {
        background: #f1f5f9;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .list-inline {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        background: white;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid #e2e8f0;
        display: flex;
        gap: 8px;
        align-items: center;
      }

      @media (max-width: 768px) {
        .book-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }

        .tabs {
          flex-wrap: wrap;
        }

        .logout-btn {
          position: relative;
          top: 0;
          left: 0;
          margin-bottom: 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginContainer" class="login-container">
      <h1>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
      <div class="form-group">
        <label for="passwordInput">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input
          type="password"
          id="passwordInput"
          placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
        />
      </div>
      <button class="btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
      <p id="loginError" class="error-message" style="display: none">
        ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©
      </p>
      <!-- ØªÙ… Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© -->
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <div id="adminContainer" class="admin-container">
      <button class="btn logout-btn btn-danger" onclick="logout()">
        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
      </button>

      <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±</h1>

      <div id="successMessage" class="success-message" style="display: none">
        ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!
      </div>

      <div class="tabs">
        <button class="tab active" onclick="switchTab('egypt', event)">
          Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ
        </button>
        <button class="tab" onclick="switchTab('saudi', event)">
          Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ
        </button>
      </div>

      <!-- Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ -->
      <div id="egyptTab" class="tab-content active">
        <h2>Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ</h2>

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ØªØ±Ù…Ø§Øª -->
        <div class="manage-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ØªØ±Ù…Ø§Øª</h3>
          <div class="form-group">
            <label>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
            <div id="egyptSubjectsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newEgyptSubject"
                placeholder="Ø£Ø¶Ù Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"
              />
              <button class="btn btn-small" onclick="addEgyptSubject()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†ÙˆØ§Øª</label>
            <div id="egyptYearsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newEgyptYear"
                placeholder="Ø£Ø¶Ù Ø³Ù†Ø© Ù…Ø«Ù„Ø§Ù‹: 2025/2026"
              />
              <button class="btn btn-small" onclick="addEgyptYear()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØªØ±Ù…Ø§Øª</label>
            <div id="egyptTermsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newEgyptTerm"
                placeholder="Ø£Ø¶Ù ØªØ±Ù… Ù…Ø«Ù„: Ø§Ù„Ø£ÙˆÙ„"
              />
              <button class="btn btn-small" onclick="addEgyptTerm()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>
        </div>

        <form id="egyptForm">
          <div class="form-group">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨ *</label>
            <input type="text" id="egyptTitle" required />
          </div>

          <div class="form-group">
            <label>ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="egyptCoverUploadArea" onclick="document.getElementById('egyptCoverFileInput').click()">
              <div class="upload-icon">ğŸ“</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ø§Ù„ØµÙˆØ± (JPG, PNG, GIF)</div>
              <div id="egyptCoverPreview" class="upload-preview" style="display: none;"></div>
              <div id="egyptCoverFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeEgyptCover(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="egyptCoverFileInput" accept="image/*" style="display: none;" />
            <input type="text" id="egyptCoverImage" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ (PDF) *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ù…Ù„Ù PDF Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="egyptPdfUploadArea" onclick="document.getElementById('egyptPdfFileInput').click()">
              <div class="upload-icon">ğŸ“„</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„Ù PDF Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ù…Ù„ÙØ§Øª PDF ÙÙ‚Ø·</div>
              <div id="egyptPdfFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeEgyptPdf(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="egyptPdfFileInput" accept=".pdf" style="display: none;" />
            <input type="text" id="egyptDriveLink" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
            <select id="egyptSubject" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *</label>
            <select id="egyptYear" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØªØ±Ù… *</label>
            <select id="egyptTerm" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ±Ù…</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØµÙ *</label>
            <select id="egyptGrade" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø£ÙˆÙ„ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù†ÙŠ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù„Ø« Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø±Ø§Ø¨Ø¹ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø®Ø§Ù…Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø³Ø§Ø¯Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø£ÙˆÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø«Ø§Ù†ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø«Ø§Ù„Ø« Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù„ØºØ© *</label>
            <select id="egyptLanguage" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</option>
              <option value="Ø¹Ø±Ø¨ÙŠ">Ø¹Ø±Ø¨ÙŠ</option>
              <option value="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</option>
            </select>
          </div>

          <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨</button>
        </form>

        <div class="books-list">
          <h2>Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h2>
          <div id="egyptBooksList">
            <p style="color: #718096; text-align: center; padding: 20px;">
              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯
            </p>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ -->
      <div id="saudiTab" class="tab-content">
        <h2>Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</h2>

        <div class="manage-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ÙØµÙˆÙ„</h3>
          <div class="form-group">
            <label>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
            <div id="saudiSubjectsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newSaudiSubject"
                placeholder="Ø£Ø¶Ù Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"
              />
              <button class="btn btn-small" onclick="addSaudiSubject()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†ÙˆØ§Øª</label>
            <div id="saudiYearsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newSaudiYear"
                placeholder="Ø£Ø¶Ù Ø³Ù†Ø© (Ù…Ø«Ø§Ù„: 2025/2026)"
              />
              <button class="btn btn-small" onclick="addSaudiYear()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ÙØµÙˆÙ„</label>
            <div id="saudiTermsList" class="list-inline"></div>
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <input
                type="text"
                id="newSaudiTerm"
                placeholder="Ø£Ø¶Ù ÙØµÙ„ Ù…Ø«Ù„: Ø§Ù„Ø£ÙˆÙ„"
              />
              <button class="btn btn-small" onclick="addSaudiTerm()">
                Ø£Ø¶Ù
              </button>
            </div>
          </div>
        </div>

        <form id="saudiForm">
          <div class="form-group">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨ *</label>
            <input type="text" id="saudiTitle" required />
          </div>

          <div class="form-group">
            <label>ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="saudiCoverUploadArea" onclick="document.getElementById('saudiCoverFileInput').click()">
              <div class="upload-icon">ğŸ“</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ø§Ù„ØµÙˆØ± (JPG, PNG, GIF)</div>
              <div id="saudiCoverPreview" class="upload-preview" style="display: none;"></div>
              <div id="saudiCoverFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeSaudiCover(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="saudiCoverFileInput" accept="image/*" style="display: none;" />
            <input type="text" id="saudiCoverImage" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ (PDF) *</label>
            <!-- Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ù…Ù„Ù PDF Ø¨Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª -->
            <div class="upload-area" id="saudiPdfUploadArea" onclick="document.getElementById('saudiPdfFileInput').click()">
              <div class="upload-icon">ğŸ“„</div>
              <div class="upload-text">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„Ù PDF Ù‡Ù†Ø§</div>
              <div class="upload-subtext">ÙŠØ¯Ø¹Ù… Ù…Ù„ÙØ§Øª PDF ÙÙ‚Ø·</div>
              <div id="saudiPdfFileInfo" class="uploaded-file" style="display: none;">
                <span>Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹</span>
                <button type="button" class="btn-small" onclick="removeSaudiPdf(event)">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
            <input type="file" id="saudiPdfFileInput" accept=".pdf" style="display: none;" />
            <input type="text" id="saudiDriveLink" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©" style="margin-top: 10px;" />
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
            <select id="saudiSubject" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *</label>
            <select id="saudiYear" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ *</label>
            <select id="saudiTerm" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„ØµÙ *</label>
            <select id="saudiGrade" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø£ÙˆÙ„ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù†ÙŠ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø«Ø§Ù„Ø« Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø±Ø§Ø¨Ø¹ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø®Ø§Ù…Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø³Ø§Ø¯Ø³ Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø·">Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…ØªÙˆØ³Ø·">Ø«Ø§Ù†ÙŠ Ù…ØªÙˆØ³Ø·</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…ØªÙˆØ³Ø·">Ø«Ø§Ù„Ø« Ù…ØªÙˆØ³Ø·</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
            </select>
          </div>

          <div class="form-group">
            <label>Ø§Ù„Ù„ØºØ© *</label>
            <select id="saudiLanguage" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</option>
              <option value="Ø¹Ø±Ø¨ÙŠ">Ø¹Ø±Ø¨ÙŠ</option>
              <option value="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</option>
            </select>
          </div>

          <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨</button>
        </form>

        <div class="books-list">
          <h2>Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h2>
          <div id="saudiBooksList">
            <p style="color: #718096; text-align: center; padding: 20px;">
              Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      const ADMIN_PASSWORD = "AbrarSchools@2025!SecurePass";

      // Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      const DEFAULT_DATA = {
        egypt: {
          subjects: [
            "Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
            "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©",
            "Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",
            "Ø¹Ù„ÙˆÙ…",
            "Ø¯Ø±Ø§Ø³Ø§Øª",
            "ØªØ±Ø¨ÙŠØ© Ø¯ÙŠÙ†ÙŠØ©",
            "Ø­Ø§Ø³Ø¨ Ø¢Ù„ÙŠ",
            "ØªØ±Ø¨ÙŠØ© ÙÙ†ÙŠØ©",
            "Ù…Ù‡Ø§Ø±Ø§Øª Ø­ÙŠØ§ØªÙŠØ©",
            "ØªØ±Ø¨ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©",
          ],
          years: ["2024/2025", "2025/2026"],
          terms: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø«Ø§Ù†ÙŠ"],
          grades: [
            "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
            "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
            "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
            "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",
            "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",
            "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ"
          ],
          books: [],
        },
        saudi: {
          subjects: [
            "Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
            "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©",
            "Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",
            "Ø¹Ù„ÙˆÙ…",
            "Ù‚Ø±Ø¢Ù†",
            "ØªÙˆØ­ÙŠØ¯",
            "ÙÙ‚Ù‡",
            "ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
            "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",
            "Ø­Ø§Ø³Ø¨ Ø¢Ù„ÙŠ",
          ],
          years: ["2024/2025", "2025/2026"],
          terms: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø«Ø§Ù†ÙŠ"],
          grades: [
            "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",
            "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø·",
            "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…ØªÙˆØ³Ø·",
            "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…ØªÙˆØ³Ø·",
            "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",
            "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",
            "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ"
          ],
          books: [],
        },
      };

      // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±ÙØ¹
      let egyptCoverFile = null;
      let egyptPdfFile = null;
      let saudiCoverFile = null;
      let saudiPdfFile = null;

      // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø©
      function login() {
        const password = document.getElementById("passwordInput").value;
        if (password === ADMIN_PASSWORD) {
          document.getElementById("loginContainer").style.display = "none";
          document.getElementById("adminContainer").style.display = "block";
          sessionStorage.setItem("adminLoggedIn", "true");
          initData();
          loadBooks();
          setupUploadAreas();
        } else {
          document.getElementById("loginError").style.display = "block";
          setTimeout(() => {
            document.getElementById("loginError").style.display = "none";
          }, 3000);
        }
      }

      function logout() {
        sessionStorage.removeItem("adminLoggedIn");
        document.getElementById("loginContainer").style.display = "block";
        document.getElementById("adminContainer").style.display = "none";
        document.getElementById("passwordInput").value = "";
      }

      function checkSession() {
        if (sessionStorage.getItem("adminLoggedIn")) {
          document.getElementById("loginContainer").style.display = "none";
          document.getElementById("adminContainer").style.display = "block";
          initData();
          loadBooks();
          setupUploadAreas();
          return true;
        }
        return false;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
      if (checkSession()) {
        console.log("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹");
      }

      function switchTab(tab, ev) {
        document.querySelectorAll(".tab").forEach((t) => t.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach((c) => c.classList.remove("active"));
        if (ev && ev.target) ev.target.classList.add("active");
        document.getElementById(tab + "Tab").classList.add("active");
      }

      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      function initData() {
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ±ÙŠØ©
        let egyptData = JSON.parse(localStorage.getItem("egyptData"));
        if (!egyptData) {
          egyptData = DEFAULT_DATA.egypt;
          localStorage.setItem("egyptData", JSON.stringify(egyptData));
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
        let saudiData = JSON.parse(localStorage.getItem("saudiData"));
        if (!saudiData) {
          saudiData = DEFAULT_DATA.saudi;
          localStorage.setItem("saudiData", JSON.stringify(saudiData));
        }
        
        populateEgyptControls();
        populateSaudiControls();
      }

      // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø±ÙØ¹
      function setupUploadAreas() {
        // Ù…ØµØ± - ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
        const egyptCoverArea = document.getElementById('egyptCoverUploadArea');
        const egyptCoverInput = document.getElementById('egyptCoverFileInput');
        const egyptCoverPreview = document.getElementById('egyptCoverPreview');
        
        egyptCoverArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          egyptCoverArea.classList.add('dragover');
        });
        
        egyptCoverArea.addEventListener('dragleave', () => {
          egyptCoverArea.classList.remove('dragover');
        });
        
        egyptCoverArea.addEventListener('drop', (e) => {
          e.preventDefault();
          egyptCoverArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleEgyptCoverFile(files[0]);
          }
        });
        
        egyptCoverInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleEgyptCoverFile(e.target.files[0]);
          }
        });
        
        // Ù…ØµØ± - Ù…Ù„Ù PDF
        const egyptPdfArea = document.getElementById('egyptPdfUploadArea');
        const egyptPdfInput = document.getElementById('egyptPdfFileInput');
        
        egyptPdfArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          egyptPdfArea.classList.add('dragover');
        });
        
        egyptPdfArea.addEventListener('dragleave', () => {
          egyptPdfArea.classList.remove('dragover');
        });
        
        egyptPdfArea.addEventListener('drop', (e) => {
          e.preventDefault();
          egyptPdfArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleEgyptPdfFile(files[0]);
          }
        });
        
        egyptPdfInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleEgyptPdfFile(e.target.files[0]);
          }
        });
        
        // Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© - ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù
        const saudiCoverArea = document.getElementById('saudiCoverUploadArea');
        const saudiCoverInput = document.getElementById('saudiCoverFileInput');
        const saudiCoverPreview = document.getElementById('saudiCoverPreview');
        
        saudiCoverArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          saudiCoverArea.classList.add('dragover');
        });
        
        saudiCoverArea.addEventListener('dragleave', () => {
          saudiCoverArea.classList.remove('dragover');
        });
        
        saudiCoverArea.addEventListener('drop', (e) => {
          e.preventDefault();
          saudiCoverArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleSaudiCoverFile(files[0]);
          }
        });
        
        saudiCoverInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleSaudiCoverFile(e.target.files[0]);
          }
        });
        
        // Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© - Ù…Ù„Ù PDF
        const saudiPdfArea = document.getElementById('saudiPdfUploadArea');
        const saudiPdfInput = document.getElementById('saudiPdfFileInput');
        
        saudiPdfArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          saudiPdfArea.classList.add('dragover');
        });
        
        saudiPdfArea.addEventListener('dragleave', () => {
          saudiPdfArea.classList.remove('dragover');
        });
        
        saudiPdfArea.addEventListener('drop', (e) => {
          e.preventDefault();
          saudiPdfArea.classList.remove('dragover');
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            handleSaudiPdfFile(files[0]);
          }
        });
        
        saudiPdfInput.addEventListener('change', (e) => {
          if (e.target.files.length > 0) {
            handleSaudiPdfFile(e.target.files[0]);
          }
        });
      }
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„ÙØ§Øª Ù…ØµØ±
      function handleEgyptCoverFile(file) {
        if (!file.type.match('image.*')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙÙ‚Ø·');
          return;
        }
        
        egyptCoverFile = file;
        document.getElementById('egyptCoverFileInfo').style.display = 'flex';
        document.getElementById('egyptCoverImage').value = file.name;
        
        // Ø¹Ø±Ø¶ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById('egyptCoverPreview');
          preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; border-radius: 5px;">`;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
      
      function removeEgyptCover(e) {
        e.stopPropagation();
        egyptCoverFile = null;
        document.getElementById('egyptCoverFileInfo').style.display = 'none';
        document.getElementById('egyptCoverPreview').style.display = 'none';
        document.getElementById('egyptCoverImage').value = '';
        document.getElementById('egyptCoverFileInput').value = '';
      }
      
      function handleEgyptPdfFile(file) {
        if (!file.name.toLowerCase().endsWith('.pdf')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù PDF ÙÙ‚Ø·');
          return;
        }
        
        egyptPdfFile = file;
        document.getElementById('egyptPdfFileInfo').style.display = 'flex';
        document.getElementById('egyptDriveLink').value = file.name;
      }
      
      function removeEgyptPdf(e) {
        e.stopPropagation();
        egyptPdfFile = null;
        document.getElementById('egyptPdfFileInfo').style.display = 'none';
        document.getElementById('egyptDriveLink').value = '';
        document.getElementById('egyptPdfFileInput').value = '';
      }
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
      function handleSaudiCoverFile(file) {
        if (!file.type.match('image.*')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙÙ‚Ø·');
          return;
        }
        
        saudiCoverFile = file;
        document.getElementById('saudiCoverFileInfo').style.display = 'flex';
        document.getElementById('saudiCoverImage').value = file.name;
        
        // Ø¹Ø±Ø¶ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById('saudiCoverPreview');
          preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; border-radius: 5px;">`;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
      
      function removeSaudiCover(e) {
        e.stopPropagation();
        saudiCoverFile = null;
        document.getElementById('saudiCoverFileInfo').style.display = 'none';
        document.getElementById('saudiCoverPreview').style.display = 'none';
        document.getElementById('saudiCoverImage').value = '';
        document.getElementById('saudiCoverFileInput').value = '';
      }
      
      function handleSaudiPdfFile(file) {
        if (!file.name.toLowerCase().endsWith('.pdf')) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù PDF ÙÙ‚Ø·');
          return;
        }
        
        saudiPdfFile = file;
        document.getElementById('saudiPdfFileInfo').style.display = 'flex';
        document.getElementById('saudiDriveLink').value = file.name;
      }
      
      function removeSaudiPdf(e) {
        e.stopPropagation();
        saudiPdfFile = null;
        document.getElementById('saudiPdfFileInfo').style.display = 'none';
        document.getElementById('saudiDriveLink').value = '';
        document.getElementById('saudiPdfFileInput').value = '';
      }

      // ----- ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ùˆ Ø§Ù„ØªØ±Ù…Ø§Øª - Ù…ØµØ± -----
      function getEgyptData() {
        const data = JSON.parse(localStorage.getItem("egyptData") || JSON.stringify(DEFAULT_DATA.egypt));
        if (!data.books) data.books = [];
        if (!data.subjects) data.subjects = DEFAULT_DATA.egypt.subjects;
        if (!data.years) data.years = DEFAULT_DATA.egypt.years;
        if (!data.terms) data.terms = DEFAULT_DATA.egypt.terms;
        return data;
      }
      
      function saveEgyptData(data) {
        localStorage.setItem("egyptData", JSON.stringify(data));
        populateEgyptControls();
        populateEgyptFormOptions();
        showSuccess();
      }

      function populateEgyptControls() {
        const data = getEgyptData();
        
        // Ø§Ù„Ù…ÙˆØ§Ø¯
        const subjectsContainer = document.getElementById("egyptSubjectsList");
        subjectsContainer.innerHTML = "";
        data.subjects.forEach((s, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${s}</span><button class='btn-small' onclick='deleteEgyptSubject(${i})'>Ø­Ø°Ù</button>`;
          subjectsContainer.appendChild(chip);
        });

        // Ø§Ù„Ø³Ù†ÙˆØ§Øª
        const yearsContainer = document.getElementById("egyptYearsList");
        yearsContainer.innerHTML = "";
        data.years.forEach((y, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${y}</span><button class='btn-small' onclick='deleteEgyptYear(${i})'>Ø­Ø°Ù</button>`;
          yearsContainer.appendChild(chip);
        });

        // Ø§Ù„ØªØ±Ù…Ø§Øª
        const termsContainer = document.getElementById("egyptTermsList");
        termsContainer.innerHTML = "";
        data.terms.forEach((t, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${t}</span><button class='btn-small' onclick='deleteEgyptTerm(${i})'>Ø­Ø°Ù</button>`;
          termsContainer.appendChild(chip);
        });

        populateEgyptFormOptions();
      }

      function populateEgyptFormOptions() {
        const data = getEgyptData();
        const subjectSelect = document.getElementById("egyptSubject");
        subjectSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>`;
        data.subjects.forEach((s) => {
          const opt = document.createElement("option");
          opt.value = s;
          opt.textContent = s;
          subjectSelect.appendChild(opt);
        });

        const yearSelect = document.getElementById("egyptYear");
        yearSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>`;
        data.years.forEach((y) => {
          const opt = document.createElement("option");
          opt.value = y;
          opt.textContent = y;
          yearSelect.appendChild(opt);
        });

        const termSelect = document.getElementById("egyptTerm");
        termSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ±Ù…</option>`;
        data.terms.forEach((t) => {
          const opt = document.createElement("option");
          opt.value = t;
          opt.textContent = t;
          termSelect.appendChild(opt);
        });
      }

      function addEgyptSubject() {
        const val = document.getElementById("newEgyptSubject").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„Ø§");
        const data = getEgyptData();
        data.subjects.push(val);
        saveEgyptData(data);
        document.getElementById("newEgyptSubject").value = "";
      }

      function deleteEgyptSubject(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø©ØŸ")) return;
        const data = getEgyptData();
        data.subjects.splice(index, 1);
        saveEgyptData(data);
      }

      function addEgyptYear() {
        const val = document.getElementById("newEgyptYear").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ù†Ø© Ø£ÙˆÙ„Ø§");
        const data = getEgyptData();
        data.years.push(val);
        saveEgyptData(data);
        document.getElementById("newEgyptYear").value = "";
      }

      function deleteEgyptYear(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù†Ø©ØŸ")) return;
        const data = getEgyptData();
        data.years.splice(index, 1);
        saveEgyptData(data);
      }

      function addEgyptTerm() {
        const val = document.getElementById("newEgyptTerm").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ØªØ±Ù… Ø£ÙˆÙ„Ø§");
        const data = getEgyptData();
        data.terms.push(val);
        saveEgyptData(data);
        document.getElementById("newEgyptTerm").value = "";
      }

      function deleteEgyptTerm(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØ±Ù…ØŸ")) return;
        const data = getEgyptData();
        data.terms.splice(index, 1);
        saveEgyptData(data);
      }

      // ----- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© -----
      function getSaudiData() {
        const data = JSON.parse(localStorage.getItem("saudiData") || JSON.stringify(DEFAULT_DATA.saudi));
        if (!data.books) data.books = [];
        if (!data.subjects) data.subjects = DEFAULT_DATA.saudi.subjects;
        if (!data.years) data.years = DEFAULT_DATA.saudi.years;
        if (!data.terms) data.terms = DEFAULT_DATA.saudi.terms;
        return data;
      }
      
      function saveSaudiData(data) {
        localStorage.setItem("saudiData", JSON.stringify(data));
        populateSaudiControls();
        populateSaudiFormOptions();
        showSuccess();
      }

      function populateSaudiControls() {
        const data = getSaudiData();
        
        // Ø§Ù„Ù…ÙˆØ§Ø¯
        const subjectsContainer = document.getElementById("saudiSubjectsList");
        subjectsContainer.innerHTML = "";
        data.subjects.forEach((s, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${s}</span><button class='btn-small' onclick='deleteSaudiSubject(${i})'>Ø­Ø°Ù</button>`;
          subjectsContainer.appendChild(chip);
        });

        // Ø§Ù„Ø³Ù†ÙˆØ§Øª
        const yearsContainer = document.getElementById("saudiYearsList");
        yearsContainer.innerHTML = "";
        data.years.forEach((y, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${y}</span><button class='btn-small' onclick='deleteSaudiYear(${i})'>Ø­Ø°Ù</button>`;
          yearsContainer.appendChild(chip);
        });

        // Ø§Ù„ÙØµÙˆÙ„
        const termsContainer = document.getElementById("saudiTermsList");
        termsContainer.innerHTML = "";
        data.terms.forEach((t, i) => {
          const chip = document.createElement("div");
          chip.className = "chip";
          chip.innerHTML = `<span>${t}</span><button class='btn-small' onclick='deleteSaudiTerm(${i})'>Ø­Ø°Ù</button>`;
          termsContainer.appendChild(chip);
        });

        populateSaudiFormOptions();
      }

      function populateSaudiFormOptions() {
        const data = getSaudiData();
        const subjectSelect = document.getElementById("saudiSubject");
        subjectSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>`;
        data.subjects.forEach((s) => {
          const opt = document.createElement("option");
          opt.value = s;
          opt.textContent = s;
          subjectSelect.appendChild(opt);
        });

        const yearSelect = document.getElementById("saudiYear");
        yearSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>`;
        data.years.forEach((y) => {
          const opt = document.createElement("option");
          opt.value = y;
          opt.textContent = y;
          yearSelect.appendChild(opt);
        });

        const termSelect = document.getElementById("saudiTerm");
        termSelect.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„</option>`;
        data.terms.forEach((t) => {
          const opt = document.createElement("option");
          opt.value = t;
          opt.textContent = t;
          termSelect.appendChild(opt);
        });
      }

      function addSaudiSubject() {
        const val = document.getElementById("newSaudiSubject").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„Ø§");
        const data = getSaudiData();
        data.subjects.push(val);
        saveSaudiData(data);
        document.getElementById("newSaudiSubject").value = "";
      }

      function deleteSaudiSubject(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø©ØŸ")) return;
        const data = getSaudiData();
        data.subjects.splice(index, 1);
        saveSaudiData(data);
      }

      function addSaudiYear() {
        const val = document.getElementById("newSaudiYear").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ù†Ø© Ø£ÙˆÙ„Ø§");
        const data = getSaudiData();
        data.years.push(val);
        saveSaudiData(data);
        document.getElementById("newSaudiYear").value = "";
      }

      function deleteSaudiYear(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù†Ø©ØŸ")) return;
        const data = getSaudiData();
        data.years.splice(index, 1);
        saveSaudiData(data);
      }

      function addSaudiTerm() {
        const val = document.getElementById("newSaudiTerm").value.trim();
        if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ù„ÙØµÙ„ Ø£ÙˆÙ„Ø§");
        const data = getSaudiData();
        data.terms.push(val);
        saveSaudiData(data);
        document.getElementById("newSaudiTerm").value = "";
      }

      function deleteSaudiTerm(index) {
        if (!confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙØµÙ„ØŸ")) return;
        const data = getSaudiData();
        data.terms.splice(index, 1);
        saveSaudiData(data);
      }

      // ----- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨ -----
      document.getElementById("egyptForm").addEventListener("submit", function (e) {
        e.preventDefault();
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        const title = document.getElementById("egyptTitle").value.trim();
        const coverImage = document.getElementById("egyptCoverImage").value.trim();
        const driveLink = document.getElementById("egyptDriveLink").value.trim();
        const subject = document.getElementById("egyptSubject").value;
        const year = document.getElementById("egyptYear").value;
        const term = document.getElementById("egyptTerm").value;
        const grade = document.getElementById("egyptGrade").value;
        const language = document.getElementById("egyptLanguage").value;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹ Ø£Ùˆ Ø±Ø§Ø¨Ø·
        if (!coverImage && !egyptCoverFile) {
          alert("ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù Ø¥Ù…Ø§ Ø¨Ø±ÙØ¹ Ù…Ù„Ù Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø·");
          return;
        }
        
        if (!driveLink && !egyptPdfFile) {
          alert("ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ Ø¥Ù…Ø§ Ø¨Ø±ÙØ¹ Ù…Ù„Ù Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø·");
          return;
        }
        
        if (!title || !subject || !year || !term || !grade || !language) {
          alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
          return;
        }
        
        const data = getEgyptData();
        const book = {
          id: Date.now(),
          title: title,
          drive_link: egyptPdfFile ? "Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹: " + egyptPdfFile.name : driveLink,
          cover_image: egyptCoverFile ? "Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹: " + egyptCoverFile.name : coverImage,
          subject: subject,
          year: year,
          term: term,
          grade: grade,
          language: language,
        };
        
        data.books.push(book);
        saveEgyptData(data);
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        this.reset();
        removeEgyptCover({ stopPropagation: () => {} });
        removeEgyptPdf({ stopPropagation: () => {} });
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨
        loadEgyptBooks();
        
        alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
      });

      document.getElementById("saudiForm").addEventListener("submit", function (e) {
        e.preventDefault();
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        const title = document.getElementById("saudiTitle").value.trim();
        const coverImage = document.getElementById("saudiCoverImage").value.trim();
        const driveLink = document.getElementById("saudiDriveLink").value.trim();
        const subject = document.getElementById("saudiSubject").value;
        const year = document.getElementById("saudiYear").value;
        const term = document.getElementById("saudiTerm").value;
        const grade = document.getElementById("saudiGrade").value;
        const language = document.getElementById("saudiLanguage").value;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹ Ø£Ùˆ Ø±Ø§Ø¨Ø·
        if (!coverImage && !saudiCoverFile) {
          alert("ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù Ø¥Ù…Ø§ Ø¨Ø±ÙØ¹ Ù…Ù„Ù Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø·");
          return;
        }
        
        if (!driveLink && !saudiPdfFile) {
          alert("ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨ Ø¥Ù…Ø§ Ø¨Ø±ÙØ¹ Ù…Ù„Ù Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø·");
          return;
        }
        
        if (!title || !subject || !year || !term || !grade || !language) {
          alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
          return;
        }
        
        const data = getSaudiData();
        const book = {
          id: Date.now(),
          title: title,
          drive_link: saudiPdfFile ? "Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹: " + saudiPdfFile.name : driveLink,
          cover_image: saudiCoverFile ? "Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹: " + saudiCoverFile.name : coverImage,
          subject: subject,
          year: year,
          term: term,
          grade: grade,
          language: language,
        };
        
        data.books.push(book);
        saveSaudiData(data);
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        this.reset();
        removeSaudiCover({ stopPropagation: () => {} });
        removeSaudiPdf({ stopPropagation: () => {} });
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨
        loadSaudiBooks();
        
        alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
      });

      function loadBooks() {
        loadEgyptBooks();
        loadSaudiBooks();
      }

      function loadEgyptBooks() {
        const data = getEgyptData();
        const books = data.books || [];
        const container = document.getElementById("egyptBooksList");
        
        if (books.length === 0) {
          container.innerHTML = '<p style="color: #718096; text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</p>';
          return;
        }
        
        container.innerHTML = books.map((book, index) => `
          <div class="book-item">
            <div class="book-item-info">
              <div class="book-item-title">${book.title}</div>
              <div class="book-item-details">${book.subject} - ${book.grade} - Ø§Ù„ØªØ±Ù… ${book.term} - ${book.year} - ${book.language}</div>
            </div>
            <div class="book-item-actions">
              <button class="btn btn-small" onclick="editBook('egypt', ${book.id})">ØªØ¹Ø¯ÙŠÙ„</button>
              <button class="btn btn-small btn-danger" onclick="deleteBook('egypt', ${book.id})">Ø­Ø°Ù</button>
              <a class="btn btn-small" href="${book.drive_link}" target="_blank">ÙØªØ­</a>
            </div>
          </div>
        `).join("");
      }

      function loadSaudiBooks() {
        const data = getSaudiData();
        const books = data.books || [];
        const container = document.getElementById("saudiBooksList");
        
        if (books.length === 0) {
          container.innerHTML = '<p style="color: #718096; text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</p>';
          return;
        }
        
        container.innerHTML = books.map((book, index) => `
          <div class="book-item">
            <div class="book-item-info">
              <div class="book-item-title">${book.title}</div>
              <div class="book-item-details">${book.subject} - ${book.grade} - Ø§Ù„ÙØµÙ„ ${book.term} - ${book.year} - ${book.language}</div>
            </div>
            <div class="book-item-actions">
              <button class="btn btn-small" onclick="editBook('saudi', ${book.id})">ØªØ¹Ø¯ÙŠÙ„</button>
              <button class="btn btn-small btn-danger" onclick="deleteBook('saudi', ${book.id})">Ø­Ø°Ù</button>
              <a class="btn btn-small" href="${book.drive_link}" target="_blank">ÙØªØ­</a>
            </div>
          </div>
        `).join("");
      }

      function deleteBook(path, id) {
        if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨ØŸ")) return;
        const keyData = path === "egypt" ? getEgyptData() : getSaudiData();
        keyData.books = keyData.books.filter((b) => b.id !== id);
        if (path === "egypt") saveEgyptData(keyData);
        else saveSaudiData(keyData);
        loadBooks();
        alert("ØªÙ… Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
      }

      function editBook(path, id) {
        const keyData = path === "egypt" ? getEgyptData() : getSaudiData();
        const book = keyData.books.find((b) => b.id === id);
        if (!book) return alert("Ø§Ù„ÙƒØªØ§Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");

        const newTitle = prompt("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨:", book.title) || book.title;
        const newCover = prompt("Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù:", book.cover_image) || book.cover_image;
        const newDrive = prompt("Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ÙƒØªØ§Ø¨:", book.drive_link) || book.drive_link;
        const newSubject = prompt("Ø§Ù„Ù…Ø§Ø¯Ø©:", book.subject) || book.subject;
        const newYear = prompt("Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:", book.year) || book.year;
        const newTerm = prompt(path === "egypt" ? "Ø§Ù„ØªØ±Ù…:" : "Ø§Ù„ÙØµÙ„:", book.term) || book.term;
        const newGrade = prompt("Ø§Ù„ØµÙ:", book.grade) || book.grade;
        const newLang = prompt("Ø§Ù„Ù„ØºØ©:", book.language) || book.language;

        book.title = newTitle;
        book.cover_image = newCover;
        book.drive_link = newDrive;
        book.subject = newSubject;
        book.year = newYear;
        book.term = newTerm;
        book.grade = newGrade;
        book.language = newLang;

        if (path === "egypt") saveEgyptData(keyData);
        else saveSaudiData(keyData);
        loadBooks();
        alert("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
      }

      function showSuccess() {
        const msg = document.getElementById("successMessage");
        msg.style.display = "block";
        setTimeout(() => {
          msg.style.display = "none";
        }, 2000);
      }

      // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
      document.getElementById("passwordInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          login();
        }
      });

      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
      document.addEventListener('DOMContentLoaded', function() {
        console.log("ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø§Ù‡Ø²Ø©");
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©
        checkSession();
      });
      // ğŸ“‚ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© script ÙÙŠ manage.html

// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø© Supabase
const supabaseScript = document.createElement('script');
supabaseScript.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
document.head.appendChild(supabaseScript);

// Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ SupabaseØŒ Ù†Ù†Ø´Ø¦ Ø§Ù„Ø¹Ù…ÙŠÙ„
let supabaseClient = null;

supabaseScript.onload = async () => {
    const { createClient } = window.supabaseJs;
    
    supabaseClient = createClient(
        'https://hotggrxbxnffyaplabzl.supabase.co',
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvdGdncnhieG5mZnlhcGxhYnpsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4MzMzOTYsImV4cCI6MjA4MDQwOTM5Nn0.kWL2o6lbViPfGNdpyj4NfUlK0AxdIH9NOcl6ruvrXAg'
    );
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Supabase
    await loadAllData();
};

// ğŸ“Š ÙˆØ¸Ø§Ø¦Ù Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Supabase
async function loadAllData() {
    try {
        // Ø¬Ù„Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù…Ù† Supabase
        const { data: categoriesData, error: categoriesError } = await supabaseClient
            .from('categories')
            .select('*');
        
        if (categoriesError) throw categoriesError;
        
        // ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
        const organized = { egypt: {}, saudi: {} };
        categoriesData?.forEach(item => {
            if (!organized[item.curriculum]) organized[item.curriculum] = {};
            if (!organized[item.curriculum][item.type]) organized[item.curriculum][item.type] = [];
            organized[item.curriculum][item.type].push(item.name);
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
        updateEgyptControls(organized.egypt);
        updateSaudiControls(organized.saudi);
        
        // Ø¬Ù„Ø¨ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…ØµØ±ÙŠØ©
        const { data: egyptBooks, error: egyptError } = await supabaseClient
            .from('egypt_books')
            .select('*')
            .order('created_at', { ascending: false });
        
        if (!egyptError && egyptBooks) {
            loadEgyptBooksFromDB(egyptBooks);
        }
        
        // Ø¬Ù„Ø¨ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
        const { data: saudiBooks, error: saudiError } = await supabaseClient
            .from('saudi_books')
            .select('*')
            .order('created_at', { ascending: false });
        
        if (!saudiError && saudiBooks) {
            loadSaudiBooksFromDB(saudiBooks);
        }
        
    } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        initData();
    }
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØµØ±ÙŠØ©
function updateEgyptControls(data) {
    const egyptData = {
        subjects: data.subject || DEFAULT_DATA.egypt.subjects,
        years: data.year || DEFAULT_DATA.egypt.years,
        terms: data.term || DEFAULT_DATA.egypt.terms,
        books: []
    };
    
    localStorage.setItem("egyptData", JSON.stringify(egyptData));
    populateEgyptControls();
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
function updateSaudiControls(data) {
    const saudiData = {
        subjects: data.subject || DEFAULT_DATA.saudi.subjects,
        years: data.year || DEFAULT_DATA.saudi.years,
        terms: data.term || DEFAULT_DATA.saudi.terms,
        books: []
    };
    
    localStorage.setItem("saudiData", JSON.stringify(saudiData));
    populateSaudiControls();
}

// ğŸ“ ØªØ¹Ø¯ÙŠÙ„ ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
async function addEgyptSubject() {
    const val = document.getElementById("newEgyptSubject").value.trim();
    if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ø£ÙˆÙ„Ø§");
    
    if (supabaseClient) {
        const { error } = await supabaseClient
            .from('categories')
            .insert([{ curriculum: 'egypt', type: 'subject', name: val }]);
        
        if (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø©:', error);
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø©');
            return;
        }
    }
    
    // ØªØ­Ø¯ÙŠØ« Ù…Ø­Ù„ÙŠ
    const data = getEgyptData();
    data.subjects.push(val);
    saveEgyptData(data);
    document.getElementById("newEgyptSubject").value = "";
}

// ğŸ“ ØªØ¹Ø¯ÙŠÙ„ ÙˆØ¸ÙŠÙØ© Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ
document.getElementById("egyptForm").addEventListener("submit", async function (e) {
    e.preventDefault();
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
    const title = document.getElementById("egyptTitle").value.trim();
    const coverImage = document.getElementById("egyptCoverImage").value.trim();
    const driveLink = document.getElementById("egyptDriveLink").value.trim();
    const subject = document.getElementById("egyptSubject").value;
    const year = document.getElementById("egyptYear").value;
    const term = document.getElementById("egyptTerm").value;
    const grade = document.getElementById("egyptGrade").value;
    const language = document.getElementById("egyptLanguage").value;
    
    if (!title || !coverImage || !driveLink || !subject || !year || !term || !grade || !language) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
        return;
    }
    
    const bookData = {
        title,
        drive_link: driveLink,
        cover_image: coverImage,
        subject,
        year,
        term,
        grade,
        language
    };
    
    // Ø­ÙØ¸ ÙÙŠ Supabase
    if (supabaseClient) {
        const { data, error } = await supabaseClient
            .from('egypt_books')
            .insert([bookData])
            .select();
        
        if (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨:', error);
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨');
            return;
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        this.reset();
        removeEgyptCover({ stopPropagation: () => {} });
        removeEgyptPdf({ stopPropagation: () => {} });
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
        const { data: books } = await supabaseClient
            .from('egypt_books')
            .select('*')
            .order('created_at', { ascending: false });
        
        loadEgyptBooksFromDB(books);
        
        alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
        return;
    }
    
    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Supabase Ù…ØªØ§Ø­Ù‹Ø§ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
    const data = getEgyptData();
    const book = {
        id: Date.now(),
        ...bookData
    };
    
    data.books.push(book);
    saveEgyptData(data);
    
    this.reset();
    removeEgyptCover({ stopPropagation: () => {} });
    removeEgyptPdf({ stopPropagation: () => {} });
    
    loadEgyptBooks();
    alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ Ø¨Ù†Ø¬Ø§Ø­!");
});

// ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ¨ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function loadEgyptBooksFromDB(books) {
    const container = document.getElementById("egyptBooksList");
    
    if (!books || books.length === 0) {
        container.innerHTML = '<p style="color: #718096; text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</p>';
        return;
    }
    
    container.innerHTML = books.map((book) => `
        <div class="book-item">
            <div class="book-item-info">
                <div class="book-item-title">${book.title}</div>
                <div class="book-item-details">${book.subject} - ${book.grade} - Ø§Ù„ØªØ±Ù… ${book.term} - ${book.year} - ${book.language}</div>
            </div>
            <div class="book-item-actions">
                <button class="btn btn-small" onclick="editBookDB('egypt', ${book.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                <button class="btn btn-small btn-danger" onclick="deleteBookDB('egypt', ${book.id})">Ø­Ø°Ù</button>
                <a class="btn btn-small" href="${book.drive_link}" target="_blank">ÙØªØ­</a>
            </div>
        </div>
    `).join("");
}

// ÙˆØ¸Ø§Ø¦Ù Ù…Ø´Ø§Ø¨Ù‡Ø© Ù„Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
// ... (Ø£Ø¶Ù Ù†ÙØ³ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ)

// Ø­Ø°Ù ÙƒØªØ§Ø¨ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
async function deleteBookDB(path, id) {
    if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨ØŸ")) return;
    
    if (supabaseClient) {
        const table = path === 'egypt' ? 'egypt_books' : 'saudi_books';
        const { error } = await supabaseClient
            .from(table)
            .delete()
            .eq('id', id);
        
        if (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨:', error);
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨');
            return;
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ¨
        const { data: books } = await supabaseClient
            .from(table)
            .select('*')
            .order('created_at', { ascending: false });
        
        if (path === 'egypt') {
            loadEgyptBooksFromDB(books);
        } else {
            loadSaudiBooksFromDB(books);
        }
        
        alert("ØªÙ… Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
        return;
    }
    
    // Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
    deleteBook(path, id);
}

// Ø§Ø³ØªØ¨Ø¯Ø§Ù„ initData Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø´ØªØ±Ùƒ
function initData() {
    // Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ù„ÙŠ ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
    let egyptData = JSON.parse(localStorage.getItem("egyptData"));
    if (!egyptData) {
        egyptData = DEFAULT_DATA.egypt;
        localStorage.setItem("egyptData", JSON.stringify(egyptData));
    }
    
    let saudiData = JSON.parse(localStorage.getItem("saudiData"));
    if (!saudiData) {
        saudiData = DEFAULT_DATA.saudi;
        localStorage.setItem("saudiData", JSON.stringify(saudiData));
    }
    
    populateEgyptControls();
    populateSaudiControls();
}

// ØªØ­Ø¯ÙŠØ« ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    console.log("ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø§Ù‡Ø²Ø©");
    
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Supabase ØºÙŠØ± Ù…ØªØ§Ø­ Ø¨Ø¹Ø¯ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
    setTimeout(() => {
        if (!supabaseClient) {
            console.log("Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©");
            if (checkSession()) {
                initData();
                loadBooks();
                setupUploadAreas();
            }
        }
    }, 2000);
});
    </script>
  </body>
</html>