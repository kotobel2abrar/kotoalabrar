<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ - ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±</title>
    <link rel="icon" href="Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±.webp" type="image/png" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
        min-height: 100vh;
      }
      .navbar {
        background: white;
        padding: 15px 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .navbar-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .site-title {
        font-size: 1.5em;
        color: #2d3748;
        font-weight: 700;
      }

      .nav-links {
        display: flex;
        gap: 20px;
      }

      .nav-links a {
        color: #e74c3c;
        text-decoration: none;
        font-weight: 600;
        padding: 8px 16px;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .nav-links a:hover {
        background: #e74c3c;
        color: white;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      .page-header {
        text-align: center;
        margin-bottom: 30px;
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .page-header img {
        max-width: 200px;
        height: auto;
        margin-bottom: 20px;
      }

      .page-header h1 {
        color: #2d3748;
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .page-header .flag {
        font-size: 3em;
      }

      .search-section {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .search-box {
        width: 100%;
        padding: 15px 20px;
        font-size: 1.1em;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        margin-bottom: 20px;
        transition: border-color 0.3s ease;
      }

      .search-box:focus {
        outline: none;
        border-color: #e74c3c;
      }

      .filters {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
      }

      .filter-group label {
        color: #4a5568;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .filter-group select {
        padding: 10px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1em;
        cursor: pointer;
        transition: border-color 0.3s ease;
      }

      .filter-group select:focus {
        outline: none;
        border-color: #e74c3c;
      }

      .books-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .book-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .book-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      }

      .book-cover {
        width: 100%;
        height: 350px;
        object-fit: cover;
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      }

      .book-info {
        padding: 20px;
      }

      .book-title {
        color: #2d3748;
        font-size: 1.3em;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .book-details {
        color: #718096;
        font-size: 0.9em;
        margin-bottom: 15px;
      }

      .book-details span {
        display: block;
        margin-bottom: 5px;
      }

      .open-btn {
        display: block;
        width: 100%;
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        padding: 12px;
        border: none;
        border-radius: 8px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        text-align: center;
        transition: all 0.3s ease;
      }

      .open-btn:hover {
        transform: scale(1.05);
      }

      .no-results {
        text-align: center;
        color: white;
        font-size: 1.2em;
        margin-top: 50px;
        background: rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 15px;
      }

      footer {
        background: white;
        padding: 20px;
        text-align: center;
        margin-top: 50px;
        border-radius: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      footer a {
        color: #e74c3c;
        text-decoration: none;
        font-weight: 600;
        transition: color 0.3s ease;
      }

      footer a:hover {
        color: #c0392b;
      }

      @media (max-width: 768px) {
        .navbar-content {
          flex-direction: column;
          gap: 15px;
        }

        .nav-links {
          flex-wrap: wrap;
          justify-content: center;
        }

        .page-header h1 {
          font-size: 2em;
        }

        .page-header img {
          max-width: 150px;
        }

        .filters {
          grid-template-columns: 1fr;
        }

        .books-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
    <script>
      // âœ… Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø© - Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
      (function () {
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        const currentPage = window.location.pathname.split("/").pop();

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø© Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
        const allowedPages = ["login.html", "signin.html", "ØªØ³Ø¬ÙŠÙ„.html"];

        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ÙÙŠ ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        if (
          !allowedPages.some(
            (page) => currentPage.includes(page) || currentPage === ""
          )
        ) {
          // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
          if (!sessionStorage.getItem("isLoggedIn")) {
            // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙÙˆØ±Ø§Ù‹ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
            window.location.replace("login.html");
          }
        }
      })();
    </script>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-content">
        <div
          class="site-title"
          data-en="Abrar Schools Books"
          data-ar="ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±"
        >
          ÙƒØªØ¨ Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±
        </div>
        <div class="nav-links">
          <a href="index.html" data-en="Curriculums" data-ar="Ø§Ù„Ù…Ø³Ø§Ø±">Ø§Ù„Ù…Ø³Ø§Ø±</a>
          <a href="book_eg.html" data-en="Books" data-ar="Ø§Ù„ÙƒØªØ¨">Ø§Ù„ÙƒØªØ¨</a>
          <a href="about.html" data-en="About" data-ar="Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"
            >Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</a
          >
          <a href="contact.html" data-en="Contact" data-ar="Ø§Ù„ØªÙˆØ§ØµÙ„">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="page-header">
        <img src="Ù„ÙˆØ¬Ùˆ Ù…Ø­Ø³Ù† 1.png" alt="Ø´Ø¹Ø§Ø± Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø±" />
        <div class="flag">ğŸ‡ªğŸ‡¬</div>
        <h1 data-en="Egyptian Curriculum" data-ar="Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ">
          Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØµØ±ÙŠ
        </h1>
      </div>

      <div class="search-section">
        <input
          type="text"
          id="searchBox"
          class="search-box"
          data-placeholder-en="Search by title or author..."
          data-placeholder-ar="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ø¨Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø§Ù„Ù…Ø¤Ù„Ù..."
          placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ø¨Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø§Ù„Ù…Ø¤Ù„Ù..."
        />

        <div class="filters">
          <div class="filter-group">
            <label data-en="Subject" data-ar="Ø§Ù„Ù…Ø§Ø¯Ø©">Ø§Ù„Ù…Ø§Ø¯Ø©</label>
            <select id="subjectFilter">
              <option value="" data-en="All Subjects" data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label data-en="Grade" data-ar="Ø§Ù„ØµÙ">Ø§Ù„ØµÙ</label>
            <select id="gradeFilter">
              <option value="" data-en="All Grades" data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ
              </option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ">Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
              <option value="Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</option>
              <option value="Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ">Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</option>
            </select>
          </div>

          <div class="filter-group">
            <label data-en="Term" data-ar="Ø§Ù„ØªØ±Ù…">Ø§Ù„ØªØ±Ù…</label>
            <select id="termFilter">
              <option value="" data-en="All Terms" data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØªØ±Ø§Ù…">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØªØ±Ø§Ù…
              </option>
              <option value="Ø§Ù„Ø£ÙˆÙ„" data-en="First Term" data-ar="Ø§Ù„ØªØ±Ù… Ø§Ù„Ø£ÙˆÙ„">
                Ø§Ù„ØªØ±Ù… Ø§Ù„Ø£ÙˆÙ„
              </option>
              <option
                value="Ø§Ù„Ø«Ø§Ù†ÙŠ"
                data-en="Second Term"
                data-ar="Ø§Ù„ØªØ±Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ"
              >
                Ø§Ù„ØªØ±Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label data-en="Academic Year" data-ar="Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©"
              >Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</label
            >
            <select id="yearFilter">
              <option value="" data-en="All Years" data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ù†ÙˆØ§Øª">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ù†ÙˆØ§Øª
              </option>
              <option value="2024/2025">2024/2025</option>
              <option value="2023/2024">2023/2024</option>
            </select>
          </div>

          <div class="filter-group">
            <label data-en="Language" data-ar="Ø§Ù„Ù„ØºØ©">Ø§Ù„Ù„ØºØ©</label>
            <select id="languageFilter">
              <option value="" data-en="All Languages" data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„ØºØ§Øª">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„ØºØ§Øª
              </option>
              <option value="Ø¹Ø±Ø¨ÙŠ" data-en="Arabic" data-ar="Ø¹Ø±Ø¨ÙŠ">Ø¹Ø±Ø¨ÙŠ</option>
              <option value="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ" data-en="English" data-ar="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">
                Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ
              </option>
            </select>
          </div>
        </div>
      </div>

      <div id="booksGrid" class="books-grid"></div>
      <div
        id="noResults"
        class="no-results"
        style="display: none"
        data-en="No results match your search"
        data-ar="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«"
      >
        Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«
      </div>

      <footer>
        <a
          href="rights.html"
          data-en="All Rights Reserved Â© 2025 Abrar Private Schools"
          data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø± Ø§Ù„Ø£Ù‡Ù„ÙŠØ©"
          >Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø£Ø¨Ø±Ø§Ø± Ø§Ù„Ø£Ù‡Ù„ÙŠØ©</a
        >
      </footer>
    </div>

    <script>
      let currentLang = localStorage.getItem("siteLang") || "ar";

      function initLanguage() {
        if (currentLang === "en") applyLanguage("en");
      }

      function toggleLanguage() {
        currentLang = currentLang === "ar" ? "en" : "ar";
        localStorage.setItem("siteLang", currentLang);
        applyLanguage(currentLang);
      }

      function applyLanguage(lang) {
        document.documentElement.lang = lang;
        document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";

        document.querySelectorAll("[data-ar][data-en]").forEach((el) => {
          el.textContent = el.getAttribute("data-" + lang);
        });

        document
          .querySelectorAll("[data-placeholder-ar][data-placeholder-en]")
          .forEach((el) => {
            el.placeholder = el.getAttribute("data-placeholder-" + lang);
          });

        document.getElementById("langButton").textContent =
          lang === "ar" ? "ğŸŒ EN" : "ğŸŒ AR";
      }

      function getBooks() {
        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage Ø¨Ù†ÙØ³ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        const egyptData = JSON.parse(localStorage.getItem("egyptData"));
        
        if (egyptData && egyptData.books && egyptData.books.length > 0) {
          // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© ÙÙŠ ØµÙØ­Ø© Ø§Ù„ÙƒØªØ¨
          return egyptData.books.map(book => ({
            title: book.title,
            drive_link: book.drive_link,
            cover_image: book.cover_image,
            subject: book.subject,
            year: book.year,
            term: book.term,
            grade: book.grade,
            language: book.language
          }));
        }
        
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª
        return [
          {
            title: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª - Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",
            drive_link: "https://drive.google.com/file/d/EXAMPLE1",
            cover_image:
              "https://via.placeholder.com/280x350/e74c3c/ffffff?text=Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
            subject: "Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
            year: "2024/2025",
            term: "Ø§Ù„Ø£ÙˆÙ„",
            grade: "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",
            language: "Ø¹Ø±Ø¨ÙŠ",
          },
          {
            title: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
            drive_link: "https://drive.google.com/file/d/EXAMPLE2",
            cover_image:
              "https://via.placeholder.com/280x350/c0392b/ffffff?text=Ø¹Ø±Ø¨ÙŠ",
            subject: "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©",
            year: "2024/2025",
            term: "Ø§Ù„Ø£ÙˆÙ„",
            grade: "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
            language: "Ø¹Ø±Ø¨ÙŠ",
          },
        ];
      }

      function populateSubjectFilter() {
        const egyptData = JSON.parse(localStorage.getItem("egyptData"));
        const subjectFilter = document.getElementById("subjectFilter");
        
        if (egyptData && egyptData.subjects && egyptData.subjects.length > 0) {
          // Ù…Ø³Ø­ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„)
          while (subjectFilter.options.length > 1) {
            subjectFilter.remove(1);
          }
          
          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø®Ø²Ù†Ø©
          egyptData.subjects.forEach(subject => {
            const option = document.createElement("option");
            option.value = subject;
            option.textContent = subject;
            subjectFilter.appendChild(option);
          });
        } else {
          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
          const defaultSubjects = [
            "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©", "Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", "Ø¹Ù„ÙˆÙ…", 
            "Ø¯Ø±Ø§Ø³Ø§Øª", "ØªØ±Ø¨ÙŠØ© Ø¯ÙŠÙ†ÙŠØ©"
          ];
          
          defaultSubjects.forEach(subject => {
            const option = document.createElement("option");
            option.value = subject;
            option.textContent = subject;
            subjectFilter.appendChild(option);
          });
        }
      }

      let allBooks = getBooks();

      function renderBooks(books) {
        const grid = document.getElementById("booksGrid");
        const noResults = document.getElementById("noResults");

        if (books.length === 0) {
          grid.innerHTML = "";
          noResults.style.display = "block";
          return;
        }
        noResults.style.display = "none";
        grid.innerHTML = books
          .map(
            (book) => `
                <div class="book-card">
                    <img src="${book.cover_image}" alt="${
              book.title
            }" class="book-cover">
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <div class="book-details">
                            <span>ğŸ“š ${book.subject}</span>
                            <span>ğŸ“ ${book.grade}</span>
                            <span>ğŸ“… ${
                              currentLang === "ar" ? "Ø§Ù„ØªØ±Ù…" : "Term"
                            } ${book.term} - ${book.year}</span>
                            <span>ğŸŒ ${book.language}</span>
                        </div>
                        <a href="${
                          book.drive_link
                        }" target="_blank" rel="noopener noreferrer" class="open-btn">${
              currentLang === "ar" ? "Ø§ÙØªØ­" : "Open"
            }</a>
                    </div>
                </div>
            `
          )
          .join("");
      }
      function filterBooks() {
        const search = document.getElementById("searchBox").value.toLowerCase();
        const subject = document.getElementById("subjectFilter").value;
        const grade = document.getElementById("gradeFilter").value;
        const term = document.getElementById("termFilter").value;
        const year = document.getElementById("yearFilter").value;
        const language = document.getElementById("languageFilter").value;

        const filtered = allBooks.filter((book) => {
          const matchSearch = book.title.toLowerCase().includes(search);
          const matchSubject = !subject || book.subject === subject;
          const matchGrade = !grade || book.grade === grade;
          const matchTerm = !term || book.term === term;
          const matchYear = !year || book.year === year;
          const matchLanguage = !language || book.language === language;

          return (
            matchSearch &&
            matchSubject &&
            matchGrade &&
            matchTerm &&
            matchYear &&
            matchLanguage
          );
        });

        renderBooks(filtered);
      }
      document
        .getElementById("searchBox")
        .addEventListener("input", filterBooks);
      document
        .getElementById("subjectFilter")
        .addEventListener("change", filterBooks);
      document
        .getElementById("gradeFilter")
        .addEventListener("change", filterBooks);
      document
        .getElementById("termFilter")
        .addEventListener("change", filterBooks);
      document
        .getElementById("yearFilter")
        .addEventListener("change", filterBooks);
      document
        .getElementById("languageFilter")
        .addEventListener("change", filterBooks);

      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
      document.addEventListener('DOMContentLoaded', function() {
        allBooks = getBooks();
        renderBooks(allBooks);
        populateSubjectFilter();
        initLanguage();
      });

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØªØ¨ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ù„ØºØ© Ø§Ù„ØµÙØ­Ø©
      document.getElementById('langButton')?.addEventListener('click', function() {
        toggleLanguage();
        renderBooks(allBooks);
      });
    </script>
    <script>
      // ÙÙŠ ØµÙØ­Ø§Øª Ø§Ù„ÙƒØªØ¨
      document.addEventListener("click", (e) => {
        if (e.target.classList.contains("open-btn")) {
          const bookTitle = e.target
            .closest(".book-card")
            .querySelector(".book-title").textContent;
          recordDownload(bookTitle);
        }
      });
      function recordDownload(bookId) {
        const stats = JSON.parse(localStorage.getItem("siteStats") || "{}");
        if (!stats.downloads) stats.downloads = {};
        if (!stats.downloads[bookId]) stats.downloads[bookId] = 0;
        stats.downloads[bookId]++;

        const today = new Date().toDateString();
        if (!stats.todayDownloads) stats.todayDownloads = {};
        if (!stats.todayDownloads[today]) stats.todayDownloads[today] = 0;
        stats.todayDownloads[today]++;

        localStorage.setItem("siteStats", JSON.stringify(stats));
      }
    </script>
    <script src="theme-menu.js"></script>
  </body>
</html>